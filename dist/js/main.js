!function(){function t(r,e,i){function n(o,s){if(!e[o]){if(!r[o]){var h="function"==typeof require&&require;if(!s&&h)return h(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=e[o]={exports:{}};r[o][0].call(c.exports,function(t){return n(r[o][1][t]||t)},c,c.exports,t,r,e,i)}return e[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)n(i[o]);return n}return t}()({1:[function(t,r,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){var t;(t=console).log.apply(t,["canvas "].concat(Array.prototype.slice.call(arguments)))};e.default=i},{}],2:[function(t,r,e){"use strict";function i(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,r){for(var e=0;e<r.length;e++){var i=r[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(r,e,i){return e&&t(r.prototype,e),i&&t(r,i),r}}(),a=function(){function t(r,e,n){i(this,t),this.ctx=r,this.x=e,this.y=n,this.h=n,this.vx=-(4+4*Math.random()),this.vy=-this.vx,this.len=500*Math.random()+100,console.log(this.x,this.y,this.h,this.len)}return n(t,[{key:"flow",value:function(){return!(this.x<-this.len||this.y>this.h+this.len)&&(this.y-=this.vy,!0)}},{key:"draw",value:function(){var t=this.ctx,r=t.createRadialGradient(this.x,this.y,0,this.x,this.y,this.len),e=Math.PI;r.addColorStop(0,"rgba(255,255,255,1)"),r.addColorStop(1,"rgba(255,255,255,0)"),t.save(),t.fillStyle=r,t.beginPath(),t.arc(this.x,this.y,2*Math.random()+1,e/4,5*e/4),t.lineTo(this.x+this.len,this.y-this.len),t.closePath(),t.fill(),t.restore()}}]),t}();e.default=a},{}],3:[function(t,r,e){"use strict";function i(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,r){for(var e=0;e<r.length;e++){var i=r[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(r,e,i){return e&&t(r.prototype,e),i&&t(r,i),r}}(),a=function(){function t(r,e,n,a){var o=this;i(this,t),this.ctx=r,this.width=e,this.height=n;var s=new Image;s.src=a,this.picFlag=s,s.onload=function(t){o.ready=!0},this.draw()}return n(t,[{key:"getFlagRect",value:function(){return this.flagRect}},{key:"drawFlag",value:function(){var t=this.ctx,r=this.picFlag;t.save();var e=this.width-40,i=e*r.height/r.width;this.flagRect={x:20,y:70,width:e,height:i},t.shadowBlur=80,t.shadowColor="rgba(0, 0, 0, 0.2)",t.shadowOffsetX=0,t.shadowOffsetY=50,t.drawImage(r,0,0,r.width,r.height,20,70,e,i),t.restore()}},{key:"drawBg",value:function(){var t=this.ctx;t.save(),t.clearRect(0,0,this.width,this.height),t.fillStyle="rgba(0, 0, 0, 0)",t.fillRect(0,0,this.width,this.height),t.restore()}},{key:"draw",value:function(){this.drawBg(),this.drawFlag()}},{key:"draw1",value:function(){var t=this.ctx,r=t.createRadialGradient(200,200,30,100,200,800);r.addColorStop(0,"rgb(255,255,255)"),r.addColorStop(.01,"rgb(70,70,80)"),r.addColorStop(.2,"rgb(40,40,50)"),r.addColorStop(.4,"rgb(20,20,30)"),r.addColorStop(1,"rgb(0,0,10)"),t.save(),t.fillRect(0,0,this.width,this.height),t.restore()}}]),t}();e.default=a},{}],4:[function(t,r,e){"use strict";function i(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function n(t,r){return function(e){var i=Math.abs(r.x-t.x),n=Math.abs(r.y-t.y),a=Math.sqrt(i*i+n*n),o=i*e/a,s=n*e/a;return{x:o*(r.x>t.x?1:-1),y:s*(r.y>t.y?1:-1)}}}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,r){for(var e=0;e<r.length;e++){var i=r[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(r,e,i){return e&&t(r.prototype,e),i&&t(r,i),r}}(),o=function(){function t(r,e,a,o,s){var h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:10;i(this,t),this.ctx=r,this.width=e,this.height=a,this.stars=[o],this.counts=0,this.end=!1;var u=new Image;u.src=s,this.starPic=u,this.direction=Math.random()>0?1:-1,this.moveOffset=n({x:o.from.x,y:o.from.y},{x:o.x,y:o.y})(h)}return a(t,[{key:"draw",value:function(){var t=this,r=this.ctx;r.save();var e=this.starPic;r.fillStyle="white",this.stars.forEach(function(i){var n=t.moveOffset,a={x:i.from.x+n.x,y:i.from.y+n.y};a.y<=i.y?(a.x=i.x,a.y=i.y,t.end=!0):(i.from.x=a.x,i.from.y=a.y);var o=e.width/7*1,s=1*e.height;if(console.log(o,s),!t.end){var h={x:a.x+22.75,y:a.y+22.75,r:45.5/3},u=r.createRadialGradient(h.x,h.y,0,h.x,h.y,h.r);u.addColorStop(0,"rgba(255, 255, 255, 1)"),u.addColorStop(1,"rgba(255, 255, 255, 0)"),r.fillStyle=u,r.arc(h.x,h.y,h.r,0,2*Math.PI),r.fill()}if(t.end){var c={x:a.x+o/2,y:a.y+s/2};r.translate(c.x,c.y),r.rotate(t.direction*t.counts*(Math.PI/360)),r.translate(-c.x,-c.y)}r.drawImage(e,i.frame*o,0,o,s,a.x,a.y,o,s)}),r.restore(),this.counts++,this.end&&this.counts%10==0&&this.blink()}},{key:"blink",value:function(){this.stars=this.stars.map(function(t){return t.frame+=1,t.frame%=7,t})}}]),t}();e.default=o},{}],5:[function(t,r,e){"use strict";function i(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,r){for(var e=0;e<r.length;e++){var i=r[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(r,e,i){return e&&t(r.prototype,e),i&&t(r,i),r}}(),a=function(){function t(r,e,n,a){i(this,t),this.ctx=r,this.width=e,this.height=n,this.stars=[],this.count=0;var o=new Image;o.src=a,this.starPic=o}return n(t,[{key:"getStars",value:function(t){for(var r=[];t--;)r.push({x:Math.random()*this.width,y:Math.random()*this.height,r:Math.random()+2.7});return r}},{key:"setStars",value:function(t){this.stars=t.map(function(t){return{x:t.x,y:t.y,r:Math.random()+1.5,frame:Math.floor(7*Math.random())}})}},{key:"draw",value:function(){var t=this.ctx;t.save();var r=this.starPic,e=r.width/7,i=r.height;this.stars.forEach(function(n){t.drawImage(r,n.frame*e,0,e,i,n.x,n.y,21,21)}),this.count+=1,t.restore()}},{key:"getMove",value:function(t,r){var e={x:this.x/4,y:this.y/2};Math.random();return{x:(t-e.x)*Math.cos(1)-(r-e.y)*Math.sin(1)+e.x,y:(t-e.x)*Math.sin(1)+(r-e.y)*Math.cos(1)+e.y}}},{key:"blink",value:function(){this.stars=this.stars.map(function(t){var r=Math.random()>.5?1:-1;return t.r+=.2*r,t.r<0?t.r=-t.r:t.r>1.5&&(t.r-=.2),t.frame+=1,t.frame%=7,t})}}]),t}();e.default=a},{}],6:[function(t,r,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){if(Array.isArray(t)){for(var r=0,e=Array(t.length);r<t.length;r++)e[r]=t[r];return e}return Array.from(t)}function a(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,r){for(var e=0;e<r.length;e++){var i=r[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(r,e,i){return e&&t(r.prototype,e),i&&t(r,i),r}}(),s=t("./Stars"),h=i(s),u=t("./Moon"),c=i(u),f=t("./Meteor"),l=(i(f),t("./MyStar")),y=i(l),d=t("./Log"),v=(i(d),function(){function t(r,e){a(this,t);var i=document.getElementById(r);this.ctx=i.getContext("2d");var n=i.clientWidth,o=i.clientHeight;this.width=2*n,this.height=2*o,this.ctx.translate(.5,.5),i.width=this.width,i.height=this.height,this.options=e,this.init()}return o(t,[{key:"init",value:function(){var t=this.ctx,r=this.width,e=this.height,i=new c.default(t,r,e,this.options.flag);this.moon=i;var n=new h.default(t,r,e,this.options.star);this.stars=n;var a=[];this.myStars=a;var o=0;!function t(){o++,o%20==0&&n.blink(),i.draw(),n.draw(),a.forEach(function(t){t.draw()}),requestAnimationFrame(t)}()}},{key:"transformPoint",value:function(t){var r=this.moon.getFlagRect(),e=r.width*r.height/1e3,i=r.width,n=r.height,a=i/n,o=Math.sqrt(e/a),s=e/o,h=Math.floor(r.width/s),u=t/h;return{x:t%h*s-s/2+2*r.x,y:u*o-o/2+r.y}}},{key:"light",value:function(t,r,e){this.light2(this.transformPoint(t),r,e)}},{key:"setStars",value:function(t){var r=this,e=t.map(function(t){return r.transformPoint(t)});this.stars.setStars(e)}},{key:"setMyStars",value:function(t){var r,e=this,i=this.ctx,a=this.width,o=this.height,s=t.map(function(t,r){var n=e.transformPoint(t);return console.dir(n),new y.default(i,a,o,{x:n.x,y:n.y,frame:(r+3)%7,from:{x:a/2,y:0}},e.options.star)});(r=this.myStars).push.apply(r,n(s))}},{key:"light2",value:function(t,r,e){var i=this.ctx,n=this.width,a=this.height;console.log(t);var o=r||{x:n/2,y:a},s=new y.default(i,n,a,{x:t.x,y:t.y,frame:3,from:o},this.options.star,e);this.myStars.push(s)}}]),t}());window.FlagGame=v},{"./Log":1,"./Meteor":2,"./Moon":3,"./MyStar":4,"./Stars":5}]},{},[6]);
//# sourceMappingURL=maps/main.js.map
