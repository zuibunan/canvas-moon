{"version":3,"sources":["main.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","Object","defineProperty","value","log","_console","console","apply","concat","Array","prototype","slice","arguments","default","2","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","Meteor","ctx","x","h","this","y","vx","Math","random","vy","len","gra","createRadialGradient","PI","addColorStop","save","fillStyle","beginPath","arc","lineTo","closePath","fill","restore","3","Moon","width","height","image","_this","picFlag","Image","src","onload","ready","draw","flagRect","pic","drawWidth","offsetX","drawHeight","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","drawImage","clearRect","fillRect","drawBg","drawFlag","gradient","4","getMoveOffset","start","end","distance","abs","z","sqrt","offsetY","Stars","star","speed","undefined","stars","counts","starPic","direction","moveOffset","from","forEach","offset","drawPos","eachWidth","eachHeight","center","starSize","move","translate","rotate","frame","blink","map","5","count","amount","push","pos","item","floor","cos","sin","sign","6","_interopRequireDefault","obj","__esModule","_toConsumableArray","arr","isArray","arr2","_Stars","_Stars2","_Moon","_Moon2","_Meteor","_MyStar","_MyStar2","_Log","FlagGame","id","options","canvas","document","getElementById","getContext","originWidth","clientWidth","originHeight","clientHeight","init","moon","flag","myStars","requestAnimationFrame","number","rect","getFlagRect","area","scale","bHeight","bWidth","cols","row","light2","transformPoint","list","points","setStars","_myStars","_this2","index","point","dir","fromPosition","window","./Log","./Meteor","./Moon","./MyStar","./Stars"],"mappings":"CAAA,WAAY,QAASA,GAAEC,EAAEC,EAAEC,GAAG,QAASC,GAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,GAAIE,GAAE,kBAAmBC,UAASA,OAAQ,KAAIF,GAAGC,EAAE,MAAOA,GAAEF,GAAE,EAAI,IAAGI,EAAE,MAAOA,GAAEJ,GAAE,EAAI,IAAIK,GAAE,GAAIC,OAAM,uBAAuBN,EAAE,IAAK,MAAMK,GAAEE,KAAK,mBAAmBF,EAAE,GAAIG,GAAEX,EAAEG,IAAIS,WAAYb,GAAEI,GAAG,GAAGU,KAAKF,EAAEC,QAAQ,SAASd,GAAoB,MAAOI,GAAlBH,EAAEI,GAAG,GAAGL,IAAeA,IAAIa,EAAEA,EAAEC,QAAQd,EAAEC,EAAEC,EAAEC,GAAG,MAAOD,GAAEG,GAAGS,QAAQ,IAAI,GAAIL,GAAE,kBAAmBD,UAASA,QAAQH,EAAE,EAAEA,EAAEF,EAAEa,OAAOX,IAAID,EAAED,EAAEE,GAAI,OAAOD,GAAE,MAAOJ,OAAOiB,GAAG,SAAST,EAAQU,EAAOJ,GACxe,YAEAK,QAAOC,eAAeN,EAAS,cAC7BO,OAAO,GAET,IAAIC,GAAM,WACR,GAAIC,IAEHA,EAAWC,SAASF,IAAIG,MAAMF,GAAW,WAAWG,OAAOC,MAAMC,UAAUC,MAAMd,KAAKe,aAEzFhB,GAAQiB,QAAUT,OAEZU,GAAG,SAASxB,EAAQU,EAAOJ,GACjC,YAQA,SAASmB,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCANhHjB,OAAOC,eAAeN,EAAS,cAC3BO,OAAO,GAGX,IAAIgB,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAInC,GAAI,EAAGA,EAAImC,EAAMxB,OAAQX,IAAK,CAAE,GAAIoC,GAAaD,EAAMnC,EAAIoC,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMzB,OAAOC,eAAemB,EAAQE,EAAWI,IAAKJ,IAAiB,MAAO,UAAUN,EAAaW,EAAYC,GAAiJ,MAA9HD,IAAYR,EAAiBH,EAAYP,UAAWkB,GAAiBC,GAAaT,EAAiBH,EAAaY,GAAqBZ,MAI5hBa,EAAS,WACT,QAASA,GAAOC,EAAKC,EAAGC,GACpBlB,EAAgBmB,KAAMJ,GAEtBI,KAAKH,IAAMA,EACXG,KAAKF,EAAIA,EACTE,KAAKC,EAAIF,EACTC,KAAKD,EAAIA,EACTC,KAAKE,KAAO,EAAoB,EAAhBC,KAAKC,UACrBJ,KAAKK,IAAML,KAAKE,GAChBF,KAAKM,IAAsB,IAAhBH,KAAKC,SAAiB,IACjChC,QAAQF,IAAI8B,KAAKF,EAAGE,KAAKC,EAAGD,KAAKD,EAAGC,KAAKM,KAwC7C,MArCArB,GAAaW,IACTH,IAAK,OACLxB,MAAO,WAEH,QAAI+B,KAAKF,GAAKE,KAAKM,KAAON,KAAKC,EAAID,KAAKD,EAAIC,KAAKM,OAIjDN,KAAKC,GAAKD,KAAKK,IACR,MAGXZ,IAAK,OACLxB,MAAO,WACH,GAAI4B,GAAMG,KAAKH,IAGfU,EAAMV,EAAIW,qBAAqBR,KAAKF,EAAGE,KAAKC,EAAG,EAAGD,KAAKF,EAAGE,KAAKC,EAAGD,KAAKM,KAEnEG,EAAKN,KAAKM,EACdF,GAAIG,aAAa,EAAG,uBACpBH,EAAIG,aAAa,EAAG,uBACpBb,EAAIc,OACJd,EAAIe,UAAYL,EAChBV,EAAIgB,YAEJhB,EAAIiB,IAAId,KAAKF,EAAGE,KAAKC,EAAmB,EAAhBE,KAAKC,SAAe,EAAGK,EAAK,EAAG,EAAIA,EAAK,GAIhEZ,EAAIkB,OAAOf,KAAKF,EAAIE,KAAKM,IAAKN,KAAKC,EAAID,KAAKM,KAC5CT,EAAImB,YACJnB,EAAIoB,OACJpB,EAAIqB,cAILtB,IAGXlC,GAAQiB,QAAUiB,OAEZuB,GAAG,SAAS/D,EAAQU,EAAOJ,GACjC,YAQA,SAASmB,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCANhHjB,OAAOC,eAAeN,EAAS,cAC3BO,OAAO,GAGX,IAAIgB,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAInC,GAAI,EAAGA,EAAImC,EAAMxB,OAAQX,IAAK,CAAE,GAAIoC,GAAaD,EAAMnC,EAAIoC,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMzB,OAAOC,eAAemB,EAAQE,EAAWI,IAAKJ,IAAiB,MAAO,UAAUN,EAAaW,EAAYC,GAAiJ,MAA9HD,IAAYR,EAAiBH,EAAYP,UAAWkB,GAAiBC,GAAaT,EAAiBH,EAAaY,GAAqBZ,MAI5hBqC,EAAO,WACP,QAASA,GAAKvB,EAAKwB,EAAOC,EAAQC,GAC9B,GAAIC,GAAQxB,IAEZnB,GAAgBmB,KAAMoB,GAEtBpB,KAAKH,IAAMA,EACXG,KAAKqB,MAAQA,EACbrB,KAAKsB,OAASA,CAGd,IAAIG,GAAU,GAAIC,MAClBD,GAAQE,IAAMJ,EACdvB,KAAKyB,QAAUA,EACfA,EAAQG,OAAS,SAAU/E,GACvB2E,EAAMK,OAAQ,GAIlB7B,KAAK8B,OA8ET,MA3EA7C,GAAamC,IACT3B,IAAK,cACLxB,MAAO,WACH,MAAO+B,MAAK+B,YAGhBtC,IAAK,WACLxB,MAAO,WACH,GAAI4B,GAAMG,KAAKH,IACXmC,EAAMhC,KAAKyB,OAEf5B,GAAIc,MAEJ,IAEIsB,GAAYjC,KAAKqB,MAAQa,GACzBC,EAAaF,EAAYD,EAAIV,OAASU,EAAIX,KAC9CrB,MAAK+B,UACDjC,EALU,GAMVG,EALU,GAMVoB,MAAOY,EACPX,OAAQa,GAEZtC,EAAIuC,WAAa,GACjBvC,EAAIwC,YAAc,qBAIlBxC,EAAIyC,cAAgB,EACpBzC,EAAI0C,cAAgB,GAEpB1C,EAAI2C,UAAUR,EAAK,EAAG,EAAGA,EAAIX,MAAOW,EAAIV,OAlB1B,GACA,GAiBoDW,EAAWE,GAC7EtC,EAAIqB,aAGRzB,IAAK,SACLxB,MAAO,WACH,GAAI4B,GAAMG,KAAKH,GACfA,GAAIc,OACJd,EAAI4C,UAAU,EAAG,EAAGzC,KAAKqB,MAAOrB,KAAKsB,QAErCzB,EAAIe,UAAY,mBAChBf,EAAI6C,SAAS,EAAG,EAAG1C,KAAKqB,MAAOrB,KAAKsB,QAMpCzB,EAAIqB,aAGRzB,IAAK,OACLxB,MAAO,WACH+B,KAAK2C,SACL3C,KAAK4C,cAGTnD,IAAK,QACLxB,MAAO,WACH,GAAI4B,GAAMG,KAAKH,IACXgD,EAAWhD,EAAIW,qBAAqB,IAAK,IAAK,GAAI,IAAK,IAAK,IAEhEqC,GAASnC,aAAa,EAAG,oBACzBmC,EAASnC,aAAa,IAAM,iBAC5BmC,EAASnC,aAAa,GAAK,iBAC3BmC,EAASnC,aAAa,GAAK,iBAC3BmC,EAASnC,aAAa,EAAG,eACzBb,EAAIc,OAGJd,EAAI6C,SAAS,EAAG,EAAG1C,KAAKqB,MAAOrB,KAAKsB,QACpCzB,EAAIqB,cAILE,IAGX1D,GAAQiB,QAAUyC,OAEZ0B,GAAG,SAAS1F,EAAQU,EAAOJ,GACjC,YAQA,SAASmB,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAehH,QAAS+D,GAAcC,EAAOC,GAC1B,MAAO,UAAUC,GAEb,GAAIpD,GAAIK,KAAKgD,IAAIF,EAAInD,EAAIkD,EAAMlD,GAC3BG,EAAIE,KAAKgD,IAAIF,EAAIhD,EAAI+C,EAAM/C,GAC3BmD,EAAIjD,KAAKkD,KAAKvD,EAAIA,EAAIG,EAAIA,GAC1BiC,EAAUpC,EAAIoD,EAAWE,EACzBE,EAAUrD,EAAIiD,EAAWE,CAK7B,QACItD,EAAGoC,GALKe,EAAInD,EAAIkD,EAAMlD,EAAI,GAAK,GAM/BG,EAAGqD,GALKL,EAAIhD,EAAI+C,EAAM/C,EAAI,GAAK,KA9B3ClC,OAAOC,eAAeN,EAAS,cAC3BO,OAAO,GAGX,IAAIgB,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAInC,GAAI,EAAGA,EAAImC,EAAMxB,OAAQX,IAAK,CAAE,GAAIoC,GAAaD,EAAMnC,EAAIoC,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMzB,OAAOC,eAAemB,EAAQE,EAAWI,IAAKJ,IAAiB,MAAO,UAAUN,EAAaW,EAAYC,GAAiJ,MAA9HD,IAAYR,EAAiBH,EAAYP,UAAWkB,GAAiBC,GAAaT,EAAiBH,EAAaY,GAAqBZ,MAoC5hBwE,EAAQ,WACR,QAASA,GAAM1D,EAAKwB,EAAOC,EAAQkC,EAAMjC,GACrC,GAAIkC,GAAQ/E,UAAUd,OAAS,OAAsB8F,KAAjBhF,UAAU,GAAmBA,UAAU,GAAK,EAEhFG,GAAgBmB,KAAMuD,GAEtBvD,KAAKH,IAAMA,EACXG,KAAKqB,MAAQA,EACbrB,KAAKsB,OAASA,EACdtB,KAAK2D,OAASH,GACdxD,KAAK4D,OAAS,EACd5D,KAAKiD,KAAM,CACX,IAAIY,GAAU,GAAInC,MAClBmC,GAAQlC,IAAMJ,EACdvB,KAAK6D,QAAUA,EACf7D,KAAK8D,UAAY3D,KAAKC,SAAW,EAAI,GAAK,EAE1CJ,KAAK+D,WAAahB,GACdjD,EAAG0D,EAAKQ,KAAKlE,EACbG,EAAGuD,EAAKQ,KAAK/D,IAEbH,EAAG0D,EAAK1D,EACRG,EAAGuD,EAAKvD,IACTwD,GAqGP,MA9FAxE,GAAasE,IACT9D,IAAK,OACLxB,MAAO,WACH,GAAIuD,GAAQxB,KAERH,EAAMG,KAAKH,GACfA,GAAIc,MACJ,IAAIkD,GAAU7D,KAAK6D,OAGnBhE,GAAIe,UAAY,QAChBZ,KAAK2D,MAAMM,QAAQ,SAAUT,GACzB,GAAIU,GAAS1C,EAAMuC,WACfI,GACArE,EAAG0D,EAAKQ,KAAKlE,EAAIoE,EAAOpE,EACxBG,EAAGuD,EAAKQ,KAAK/D,EAAIiE,EAAOjE,EAGxBkE,GAAQlE,GAAKuD,EAAKvD,GAClBkE,EAAQrE,EAAI0D,EAAK1D,EACjBqE,EAAQlE,EAAIuD,EAAKvD,EACjBuB,EAAMyB,KAAM,IAEZO,EAAKQ,KAAKlE,EAAIqE,EAAQrE,EACtB0D,EAAKQ,KAAK/D,EAAIkE,EAAQlE,EAK1B,IAGImE,GAAYP,EAAQxC,MAHX,EACD,EAGRgD,EAHQ,EAGKR,EAAQvC,MAIzB,IAHAlD,QAAQF,IAAIkG,EAAWC,IAGlB7C,EAAMyB,IAAK,CACZ,GAAIqB,IACAxE,EAAGqE,EAAQrE,EAAIyE,MACftE,EAAGkE,EAAQlE,EAAIsE,MACf3H,EAVO,KAUO,GAEZiG,EAAWhD,EAAIW,qBAAqB8D,EAAOxE,EAAGwE,EAAOrE,EAAG,EAAGqE,EAAOxE,EAAGwE,EAAOrE,EAAGqE,EAAO1H,EAE5FiG,GAASnC,aAAa,EAAG,0BACzBmC,EAASnC,aAAa,EAAG,0BACzBb,EAAIe,UAAYiC,EAEhBhD,EAAIiB,IAAIwD,EAAOxE,EAAGwE,EAAOrE,EAAGqE,EAAO1H,EAAG,EAAG,EAAIuD,KAAKM,IAClDZ,EAAIoB,OAIR,GAAIO,EAAMyB,IAAK,CACX,GAAIuB,IACA1E,EAAGqE,EAAQrE,EAAIsE,EAAY,EAC3BnE,EAAGkE,EAAQlE,EAAIoE,EAAa,EAEhCxE,GAAI4E,UAAUD,EAAK1E,EAAG0E,EAAKvE,GAC3BJ,EAAI6E,OAAOlD,EAAMsC,UAAYtC,EAAMoC,QAAUzD,KAAKM,GAAK,MACvDZ,EAAI4E,WAAWD,EAAK1E,GAAI0E,EAAKvE,GAEjCJ,EAAI2C,UAAUqB,EAASL,EAAKmB,MAAQP,EAAW,EAC/CA,EAAWC,EACXF,EAAQrE,EAAGqE,EAAQlE,EACnBmE,EAAWC,KAGfxE,EAAIqB,UAGJlB,KAAK4D,SAED5D,KAAKiD,KAAOjD,KAAK4D,OAAS,IAAO,GACjC5D,KAAK4E,WAObnF,IAAK,QACLxB,MAAO,WACH+B,KAAK2D,MAAQ3D,KAAK2D,MAAMkB,IAAI,SAAUrB,GAKlC,MAJAA,GAAKmB,OAAS,EACdnB,EAAKmB,OAAS,EAGPnB,QAKZD,IAGX7F,GAAQiB,QAAU4E,OAEZuB,GAAG,SAAS1H,EAAQU,EAAOJ,GACjC,YAQA,SAASmB,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCANhHjB,OAAOC,eAAeN,EAAS,cAC3BO,OAAO,GAGX,IAAIgB,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAInC,GAAI,EAAGA,EAAImC,EAAMxB,OAAQX,IAAK,CAAE,GAAIoC,GAAaD,EAAMnC,EAAIoC,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMzB,OAAOC,eAAemB,EAAQE,EAAWI,IAAKJ,IAAiB,MAAO,UAAUN,EAAaW,EAAYC,GAAiJ,MAA9HD,IAAYR,EAAiBH,EAAYP,UAAWkB,GAAiBC,GAAaT,EAAiBH,EAAaY,GAAqBZ,MAI5hBwE,EAAQ,WACR,QAASA,GAAM1D,EAAKwB,EAAOC,EAAQC,GAC/B1C,EAAgBmB,KAAMuD,GAEtBvD,KAAKH,IAAMA,EACXG,KAAKqB,MAAQA,EACbrB,KAAKsB,OAASA,EACdtB,KAAK2D,SAEL3D,KAAK+E,MAAQ,CACb,IAAIlB,GAAU,GAAInC,MAClBmC,GAAQlC,IAAMJ,EACdvB,KAAK6D,QAAUA,EAyGnB,MAtGA5E,GAAasE,IACT9D,IAAK,WACLxB,MAAO,SAAkB+G,GAErB,IADA,GAAIrB,MACGqB,KACHrB,EAAMsB,MACFnF,EAAGK,KAAKC,SAAWJ,KAAKqB,MACxBpB,EAAGE,KAAKC,SAAWJ,KAAKsB,OACxB1E,EAAGuD,KAAKC,SAAW,KAG3B,OAAOuD,MAGXlE,IAAK,WACLxB,MAAO,SAAkBiH,GACrBlF,KAAK2D,MAAQuB,EAAIL,IAAI,SAAUM,GAC3B,OACIrF,EAAGqF,EAAKrF,EACRG,EAAGkF,EAAKlF,EACRrD,EAAGuD,KAAKC,SAAW,IACnBuE,MAAOxE,KAAKiF,MAAsB,EAAhBjF,KAAKC,gBAKnCX,IAAK,OACLxB,MAAO,WACH,GAAI4B,GAAMG,KAAKH,GACfA,GAAIc,MAEJ,IAAIkD,GAAU7D,KAAK6D,QAGfO,EAAYP,EAAQxC,MAFX,EAGTgD,EAAaR,EAAQvC,MACzBtB,MAAK2D,MAAMM,QAAQ,SAAUT,GAMzB3D,EAAI2C,UAAUqB,EAASL,EAAKmB,MAAQP,EAAW,EAC/CA,EAAWC,EACXb,EAAK1D,EAAG0D,EAAKvD,EAXF,GAAA,MAkBfD,KAAK+E,OAAS,EACdlF,EAAIqB,aAGRzB,IAAK,UACLxB,MAAO,SAAiB6B,EAAGG,GACvB,GAAIqE,IACAxE,EAAGE,KAAKF,EAAI,EACZG,EAAGD,KAAKC,EAAI,EAKHE,MAAKC,QAQlB,QACIN,GAJMA,EAAIwE,EAAOxE,GAAKK,KAAKkF,IAJnB,IAIiCpF,EAAIqE,EAAOrE,GAAKE,KAAKmF,IAJtD,GAImEhB,EAAOxE,EAKlFG,GAJMH,EAAIwE,EAAOxE,GAAKK,KAAKmF,IALnB,IAKiCrF,EAAIqE,EAAOrE,GAAKE,KAAKkF,IALtD,GAKmEf,EAAOrE,MAU1FR,IAAK,QACLxB,MAAO,WACH+B,KAAK2D,MAAQ3D,KAAK2D,MAAMkB,IAAI,SAAUrB,GAClC,GAAI+B,GAAOpF,KAAKC,SAAW,GAAM,GAAK,CActC,OAbAoD,GAAK5G,GAAY,GAAP2I,EACN/B,EAAK5G,EAAI,EACT4G,EAAK5G,GAAK4G,EAAK5G,EACR4G,EAAK5G,EAAI,MAChB4G,EAAK5G,GAAK,IAEd4G,EAAKmB,OAAS,EACdnB,EAAKmB,OAAS,EAMPnB,QAKZD,IAGX7F,GAAQiB,QAAU4E,OAEZiC,GAAG,SAASpI,EAAQU,EAAOJ,GACjC,YAwBA,SAAS+H,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQ/G,QAAS+G,GAEvF,QAASE,GAAmBC,GAAO,GAAItH,MAAMuH,QAAQD,GAAM,CAAE,IAAK,GAAI5I,GAAI,EAAG8I,EAAOxH,MAAMsH,EAAIjI,QAASX,EAAI4I,EAAIjI,OAAQX,IAAO8I,EAAK9I,GAAK4I,EAAI5I,EAAM,OAAO8I,GAAe,MAAOxH,OAAMyF,KAAK6B,GAE1L,QAAShH,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCA1BhH,GAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAInC,GAAI,EAAGA,EAAImC,EAAMxB,OAAQX,IAAK,CAAE,GAAIoC,GAAaD,EAAMnC,EAAIoC,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMzB,OAAOC,eAAemB,EAAQE,EAAWI,IAAKJ,IAAiB,MAAO,UAAUN,EAAaW,EAAYC,GAAiJ,MAA9HD,IAAYR,EAAiBH,EAAYP,UAAWkB,GAAiBC,GAAaT,EAAiBH,EAAaY,GAAqBZ,MAE5hBiH,EAAS5I,EAAQ,WAEjB6I,EAAUR,EAAuBO,GAEjCE,EAAQ9I,EAAQ,UAEhB+I,EAASV,EAAuBS,GAEhCE,EAAUhJ,EAAQ,YAIlBiJ,GAFWZ,EAAuBW,GAExBhJ,EAAQ,aAElBkJ,EAAWb,EAAuBY,GAElCE,EAAOnJ,EAAQ,SAUfoJ,GARQf,EAAuBc,GAQpB,WACX,QAASC,GAASC,EAAIC,GAClB7H,EAAgBmB,KAAMwG,EAEtB,IAAIG,GAASC,SAASC,eAAeJ,EACrCzG,MAAKH,IAAM8G,EAAOG,WAAW,KAG7B,IAAIC,GAAcJ,EAAOK,YACrBC,EAAeN,EAAOO,YAE1BlH,MAAKqB,MADO,EACC0F,EACb/G,KAAKsB,OAFO,EAEE2F,EACdjH,KAAKH,IAAI4E,UAAU,GAAW,IAE9BkC,EAAOtF,MAAQrB,KAAKqB,MACpBsF,EAAOrF,OAAStB,KAAKsB,OACrBtB,KAAK0G,QAAUA,EACf1G,KAAKmH,OA6HT,MA1HAlI,GAAauH,IACT/G,IAAK,OACLxB,MAAO,WAEH,GAAI4B,GAAMG,KAAKH,IACXwB,EAAQrB,KAAKqB,MACbC,EAAStB,KAAKsB,OAEd8F,EAAO,GAAIjB,GAAOxH,QAAQkB,EAAKwB,EAAOC,EAAQtB,KAAK0G,QAAQW,KAC/DrH,MAAKoH,KAAOA,CAEZ,IAAIzD,GAAQ,GAAIsC,GAAQtH,QAAQkB,EAAKwB,EAAOC,EAAQtB,KAAK0G,QAAQlD,KACjExD,MAAK2D,MAAQA,CAGb,IAAI2D,KACJtH,MAAKsH,QAAUA,CAEf,IAAIvC,GAAQ,GAIA,QAASJ,KAEjBI,IACAA,EAAQ,IAAM,GAAKpB,EAAMiB,QAEzBwC,EAAKtF,OACL6B,EAAM7B,OACNwF,EAAQrD,QAAQ,SAAUkB,GACtBA,EAAKrD,SAETyF,sBAAsB5C,SAK9BlF,IAAK,iBACLxB,MAAO,SAAwBuJ,GAC3B,GAAIC,GAAOzH,KAAKoH,KAAKM,cACjBC,EAAOF,EAAKpG,MAAQoG,EAAKnG,OAAS,IAClCD,EAAQoG,EAAKpG,MACbC,EAASmG,EAAKnG,OAEdsG,EAAQvG,EAAQC,EAEhBuG,EAAU1H,KAAKkD,KAAKsE,EAAOC,GAC3BE,EAASH,EAAOE,EAGhBE,EAAO5H,KAAKiF,MAAMqC,EAAKpG,MAAQyG,GAC/BE,EAAMR,EAASO,CAKnB,QACIjI,EALM0H,EAASO,EAKND,EAASA,EAAS,EAAa,EAATL,EAAK3H,EACpCG,EAAG+H,EAAMH,EAAUA,EAAU,EAAIJ,EAAKxH,MAI9CR,IAAK,QACLxB,MAAO,SAAeuJ,EAAQxD,EAAMP,GAChCzD,KAAKiI,OAAOjI,KAAKkI,eAAeV,GAASxD,EAAMP,MAGnDhE,IAAK,WACLxB,MAAO,SAAkBkK,GACrB,GAAI3G,GAAQxB,KAERoI,EAASD,EAAKtD,IAAI,SAAU2C,GAC5B,MAAOhG,GAAM0G,eAAeV,IAGhCxH,MAAK2D,MAAM0E,SAASD,MAGxB3I,IAAK,aACLxB,MAAO,SAAoBkK,GACvB,GACIG,GADAC,EAASvI,KAGTH,EAAMG,KAAKH,IACXwB,EAAQrB,KAAKqB,MACbC,EAAStB,KAAKsB,OAEd8G,EAASD,EAAKtD,IAAI,SAAU2C,EAAQgB,GACpC,GAAIC,GAAQF,EAAOL,eAAeV,EAElC,OADApJ,SAAQsK,IAAID,GACL,GAAInC,GAAS3H,QAAQkB,EAAKwB,EAAOC,GACpCxB,EAAG2I,EAAM3I,EACTG,EAAGwI,EAAMxI,EACT0E,OAAQ6D,EAAQ,GAAK,EACrBxE,MACIlE,EAAGuB,EAAQ,EACXpB,EAAG,IAERsI,EAAO7B,QAAQlD,SAGrB8E,EAAWtI,KAAKsH,SAASrC,KAAK5G,MAAMiK,EAAU1C,EAAmBwC,OAGtE3I,IAAK,SACLxB,MAAO,SAAgBpB,EAAGmH,EAAMP,GAC5B,GAAI5D,GAAMG,KAAKH,IACXwB,EAAQrB,KAAKqB,MACbC,EAAStB,KAAKsB,MAElBlD,SAAQF,IAAIrB,EACZ,IAAI8L,GAAe3E,IAAgBlE,EAAGuB,EAAQ,EAAGpB,EAAGqB,GAChDkC,EAAO,GAAI8C,GAAS3H,QAAQkB,EAAKwB,EAAOC,GACxCxB,EAAGjD,EAAEiD,EACLG,EAAGpD,EAAEoD,EACL0E,MAAO,EACPX,KAAM2E,GACP3I,KAAK0G,QAAQlD,KAAMC,EACtBzD,MAAKsH,QAAQrC,KAAKzB,OAInBgD,KAGXoC,QAAOpC,SAAWA,IAEfqC,QAAQ,EAAEC,WAAW,EAAEC,SAAS,EAAEC,WAAW,EAAEC,UAAU,SAAS","file":"../main.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar log = function log() {\n  var _console;\n\n  (_console = console).log.apply(_console, ['canvas '].concat(Array.prototype.slice.call(arguments)));\n};\nexports.default = log;\n\n},{}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Meteor = function () {\n    function Meteor(ctx, x, h) {\n        _classCallCheck(this, Meteor);\n\n        this.ctx = ctx;\n        this.x = x;\n        this.y = h;\n        this.h = h;\n        this.vx = -(4 + Math.random() * 4);\n        this.vy = -this.vx;\n        this.len = Math.random() * 500 + 100;\n        console.log(this.x, this.y, this.h, this.len);\n    }\n\n    _createClass(Meteor, [{\n        key: 'flow',\n        value: function flow() {\n            //判定流星出界\n            if (this.x < -this.len || this.y > this.h + this.len) {\n                return false;\n            }\n            // this.x += this.vx\n            this.y -= this.vy;\n            return true;\n        }\n    }, {\n        key: 'draw',\n        value: function draw() {\n            var ctx = this.ctx,\n\n            //径向渐变，从流星头尾圆心，半径越大，透明度越高\n            gra = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, this.len);\n\n            var PI = Math.PI;\n            gra.addColorStop(0, 'rgba(255,255,255,1)');\n            gra.addColorStop(1, 'rgba(255,255,255,0)');\n            ctx.save();\n            ctx.fillStyle = gra;\n            ctx.beginPath();\n            //流星头，二分之一圆\n            ctx.arc(this.x, this.y, Math.random() * 2 + 1, PI / 4, 5 * PI / 4);\n            //绘制流星尾，三角形\n            // console.log('lineTo: ', this.x + this.len, this.y - this.len);\n            // ctx.lineTo(this.x + this.len, this.y + this.len)\n            ctx.lineTo(this.x + this.len, this.y - this.len);\n            ctx.closePath();\n            ctx.fill();\n            ctx.restore();\n        }\n    }]);\n\n    return Meteor;\n}();\n\nexports.default = Meteor;\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Moon = function () {\n    function Moon(ctx, width, height, image) {\n        var _this = this;\n\n        _classCallCheck(this, Moon);\n\n        this.ctx = ctx;\n        this.width = width;\n        this.height = height;\n        // this.images = images;\n        // debugger;\n        var picFlag = new Image();\n        picFlag.src = image;\n        this.picFlag = picFlag;\n        picFlag.onload = function (e) {\n            _this.ready = true;\n        };\n        // console.log(images);\n        // this.drawBg();\n        this.draw();\n    }\n\n    _createClass(Moon, [{\n        key: 'getFlagRect',\n        value: function getFlagRect() {\n            return this.flagRect;\n        }\n    }, {\n        key: 'drawFlag',\n        value: function drawFlag() {\n            var ctx = this.ctx;\n            var pic = this.picFlag;\n            // pic.src = this.images.flag;\n            ctx.save();\n            // ctx.globalAlpha = 0.51;\n            var offsetX = 20;\n            var offsetY = 70;\n            var drawWidth = this.width - offsetX * 2;\n            var drawHeight = drawWidth * pic.height / pic.width;\n            this.flagRect = {\n                x: offsetX,\n                y: offsetY,\n                width: drawWidth,\n                height: drawHeight\n            };\n            ctx.shadowBlur = 80;\n            ctx.shadowColor = \"rgba(0, 0, 0, 0.2)\";\n            // ctx.shadowColor = \"rgba(255, 255, 255, 0.8)\";\n            // ctx.shadowColor = \"RGB(255,246,33, 0.8)\";\n            // ctx.shadowColor = \"RGB(189,0,10, 0.8)\";\n            ctx.shadowOffsetX = 0;\n            ctx.shadowOffsetY = 50;\n            // ctx.clearRect(offsetX, offsetY, drawWidth, drawHeight);\n            ctx.drawImage(pic, 0, 0, pic.width, pic.height, offsetX, offsetY, drawWidth, drawHeight);\n            ctx.restore();\n        }\n    }, {\n        key: 'drawBg',\n        value: function drawBg() {\n            var ctx = this.ctx;\n            ctx.save();\n            ctx.clearRect(0, 0, this.width, this.height);\n            // ctx.globalAlpha = 0.1;\n            ctx.fillStyle = 'rgba(0, 0, 0, 0)';\n            ctx.fillRect(0, 0, this.width, this.height);\n            // const drawWidth = this.width - 20;\n            // ctx.drawImage(\n            //     pic, \n            //     0, 0, pic.width, pic.height,\n            //     0, 0, this.width, this.height);\n            ctx.restore();\n        }\n    }, {\n        key: 'draw',\n        value: function draw() {\n            this.drawBg();\n            this.drawFlag();\n        }\n    }, {\n        key: 'draw1',\n        value: function draw1() {\n            var ctx = this.ctx,\n                gradient = ctx.createRadialGradient(200, 200, 30, 100, 200, 800);\n            //径向渐变\n            gradient.addColorStop(0, 'rgb(255,255,255)');\n            gradient.addColorStop(0.01, 'rgb(70,70,80)');\n            gradient.addColorStop(0.2, 'rgb(40,40,50)');\n            gradient.addColorStop(0.4, 'rgb(20,20,30)');\n            gradient.addColorStop(1, 'rgb(0,0,10)');\n            ctx.save();\n            // ctx.fillStyle = gradient\n            // ctx.fillStyle = 'rgba(0, 0, 0, 0)';\n            ctx.fillRect(0, 0, this.width, this.height);\n            ctx.restore();\n        }\n    }]);\n\n    return Moon;\n}();\n\nexports.default = Moon;\n\n},{}],4:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\r\n * 我点亮的星星\r\n * 素材使用一个7 x 1包含闪烁星星的7帧图片\r\n * 每次依次绘制第1 - 7 帧\r\n */\nfunction getDistance(sx, sy, ex, ey) {\n    return Math.pow(ex - sx, 2) + Math.pow(ey - sy, 2);\n}\n\nfunction getDistance(obj1, obj2) {\n    return Math.sqrt((obj1.x - ojb2.x) * (obj1.x - ojb2.x) + (obj1.y - ojb2.y) * (obj1.y - ojb2.y));\n}\n\nfunction getMoveOffset(start, end) {\n    return function (distance) {\n        // const z2 = Math.pow(distance, 2);\n        var x = Math.abs(end.x - start.x);\n        var y = Math.abs(end.y - start.y);\n        var z = Math.sqrt(x * x + y * y);\n        var offsetX = x * distance / z;\n        var offsetY = y * distance / z;\n        var xSign = end.x > start.x ? 1 : -1;\n        var ySign = end.y > start.y ? 1 : -1;\n        // const isEnd = false;\n        // if (isEnd) return end;\n        return {\n            x: offsetX * xSign,\n            y: offsetY * ySign\n        };\n    };\n}\n\nvar Stars = function () {\n    function Stars(ctx, width, height, star, image) {\n        var speed = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 10;\n\n        _classCallCheck(this, Stars);\n\n        this.ctx = ctx;\n        this.width = width;\n        this.height = height;\n        this.stars = [star];\n        this.counts = 0;\n        this.end = false;\n        var starPic = new Image();\n        starPic.src = image;\n        this.starPic = starPic;\n        this.direction = Math.random() > 0 ? 1 : -1;\n        // const speed  = 10;\n        this.moveOffset = getMoveOffset({\n            x: star.from.x,\n            y: star.from.y\n        }, {\n            x: star.x,\n            y: star.y\n        })(speed);\n    }\n    /* setImage(image) {\r\n        this.image = image;\r\n    } */\n\n\n    _createClass(Stars, [{\n        key: \"draw\",\n        value: function draw() {\n            var _this = this;\n\n            var ctx = this.ctx;\n            ctx.save();\n            var starPic = this.starPic;\n            // starPic.src = this.image;\n            // ctx.globalAlpha = 0.2;\n            ctx.fillStyle = 'white';\n            this.stars.forEach(function (star) {\n                var offset = _this.moveOffset;\n                var drawPos = {\n                    x: star.from.x + offset.x,\n                    y: star.from.y + offset.y\n                };\n\n                if (drawPos.y <= star.y) {\n                    drawPos.x = star.x;\n                    drawPos.y = star.y;\n                    _this.end = true;\n                } else {\n                    star.from.x = drawPos.x;\n                    star.from.y = drawPos.y;\n                }\n                // console.log(star, drawPos, offset);\n                // const distance = getDistance(star.from, star);\n                // console.log('star: ', star, x, y);\n                var frames = 7;\n                var scale = 1;\n                var starSize = 7 * 6.5;\n                var eachWidth = starPic.width / frames * scale;\n                var eachHeight = starPic.height * scale;\n                console.log(eachWidth, eachHeight);\n\n                // 中心发光效果\n                if (!_this.end) {\n                    var center = {\n                        x: drawPos.x + starSize / 2,\n                        y: drawPos.y + starSize / 2,\n                        r: starSize / 3\n                        // ctx.globalAlpha = 0.5;\n                    };var gradient = ctx.createRadialGradient(center.x, center.y, 0, center.x, center.y, center.r);\n                    // var gradient = ctx.createRadialGradient(drawPos.x + starSize / 2, drawPos.y + starSize / 2, 0, drawPos.x + starSize / 2, drawPos.y + starSize / 2, starSize);\n                    gradient.addColorStop(0, \"rgba(255, 255, 255, 1)\");\n                    gradient.addColorStop(1, \"rgba(255, 255, 255, 0)\");\n                    ctx.fillStyle = gradient;\n                    // ctx.fillRect(drawPos.x, drawPos.y, starSize, starSize); \n                    ctx.arc(center.x, center.y, center.r, 0, 2 * Math.PI);\n                    ctx.fill();\n                }\n\n                // 星星旋转\n                if (_this.end) {\n                    var move = {\n                        x: drawPos.x + eachWidth / 2,\n                        y: drawPos.y + eachHeight / 2\n                    };\n                    ctx.translate(move.x, move.y);\n                    ctx.rotate(_this.direction * _this.counts * (Math.PI / 360));\n                    ctx.translate(-move.x, -move.y);\n                }\n                ctx.drawImage(starPic, star.frame * eachWidth, 0, // 剪切原点\n                eachWidth, eachHeight, // 剪切宽高\n                drawPos.x, drawPos.y, // 绘制原点\n                eachWidth, eachHeight // 绘制宽高\n                );\n            });\n            ctx.restore();\n\n            // 绘制计数\n            this.counts++;\n            // 运动停止后才开始闪烁\n            if (this.end && this.counts % 10 === 0) {\n                this.blink();\n            }\n        }\n\n        //闪烁，星星半径每隔10帧随机变大或变小\n\n    }, {\n        key: \"blink\",\n        value: function blink() {\n            this.stars = this.stars.map(function (star) {\n                star.frame += 1;\n                star.frame %= 7;\n                // star.x += Math.random() * 1.5;\n                // star.y += Math.random() * 1.5;\n                return star;\n            });\n        }\n    }]);\n\n    return Stars;\n}();\n\nexports.default = Stars;\n\n},{}],5:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Stars = function () {\n    function Stars(ctx, width, height, image) {\n        _classCallCheck(this, Stars);\n\n        this.ctx = ctx;\n        this.width = width;\n        this.height = height;\n        this.stars = [];\n        // this.stars = []\n        this.count = 0;\n        var starPic = new Image();\n        starPic.src = image;\n        this.starPic = starPic;\n    }\n\n    _createClass(Stars, [{\n        key: \"getStars\",\n        value: function getStars(amount) {\n            var stars = [];\n            while (amount--) {\n                stars.push({\n                    x: Math.random() * this.width,\n                    y: Math.random() * this.height,\n                    r: Math.random() + 2.7\n                });\n            }\n            return stars;\n        }\n    }, {\n        key: \"setStars\",\n        value: function setStars(pos) {\n            this.stars = pos.map(function (item) {\n                return {\n                    x: item.x,\n                    y: item.y,\n                    r: Math.random() + 1.5,\n                    frame: Math.floor(Math.random() * 7)\n                };\n            });\n        }\n    }, {\n        key: \"draw\",\n        value: function draw() {\n            var ctx = this.ctx;\n            ctx.save();\n            // ctx.fillStyle = 'rgba(255, 255, 255, 0.8)'\n            var starPic = this.starPic;\n            var frames = 7;\n            var starSize = 7 * 3;\n            var eachWidth = starPic.width / frames;\n            var eachHeight = starPic.height;\n            this.stars.forEach(function (star) {\n                // ctx.globalAlpha = star.frame % 3;\n                // var gradient = ctx.createRadialGradient(star.x, star.y, 0, star.x, star.y, star.r);\n                // gradient.addColorStop(0, \"rgba(255, 255, 255, 1)\");\n                // gradient.addColorStop(1, \"rgba(255, 255, 255, 0)\");\n                // ctx.fillStyle = gradient;\n                ctx.drawImage(starPic, star.frame * eachWidth, 0, // 剪切原点\n                eachWidth, eachHeight, // 剪切宽高\n                star.x, star.y, // 绘制原点\n                starSize, starSize // 绘制宽高\n                );\n                // ctx.beginPath()\n                // ctx.arc(star.x, star.y, star.r, 0, 2 * Math.PI)\n                // ctx.fill()\n            });\n            this.count += 1;\n            ctx.restore();\n        }\n    }, {\n        key: \"getMove\",\n        value: function getMove(x, y) {\n            var center = {\n                x: this.x / 4,\n                y: this.y / 2\n                // const [x, y] = [\n                //     ox - center.x,\n                //     oy - center.y,\n                // ]\n            };var move = Math.random() * 2;\n            var angle = 1;\n            // const x1 = Math.cos(angle) * x - Math.sin(angle) * y;\n            // const y1 = Math.cos(angle) * y + Math.sin(angle) * x;\n\n            var x1 = (x - center.x) * Math.cos(angle) - (y - center.y) * Math.sin(angle) + center.x;\n            var y1 = (x - center.x) * Math.sin(angle) + (y - center.y) * Math.cos(angle) + center.y;\n\n            return {\n                x: x1,\n                y: y1\n            };\n        }\n        //闪烁，星星半径每隔10帧随机变大或变小\n\n    }, {\n        key: \"blink\",\n        value: function blink() {\n            this.stars = this.stars.map(function (star) {\n                var sign = Math.random() > 0.5 ? 1 : -1;\n                star.r += sign * 0.2;\n                if (star.r < 0) {\n                    star.r = -star.r;\n                } else if (star.r > 1.5) {\n                    star.r -= 0.2;\n                }\n                star.frame += 1;\n                star.frame %= 7;\n                // const move = this.getMove(star.x, star.y);\n                // star.x = star.x += sign;\n                // star.y = star.y += sign;\n                // if (this.count % 10 == 0) {\n                // }\n                return star;\n            });\n        }\n    }]);\n\n    return Stars;\n}();\n\nexports.default = Stars;\n\n},{}],6:[function(require,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Stars = require('./Stars');\n\nvar _Stars2 = _interopRequireDefault(_Stars);\n\nvar _Moon = require('./Moon');\n\nvar _Moon2 = _interopRequireDefault(_Moon);\n\nvar _Meteor = require('./Meteor');\n\nvar _Meteor2 = _interopRequireDefault(_Meteor);\n\nvar _MyStar = require('./MyStar');\n\nvar _MyStar2 = _interopRequireDefault(_MyStar);\n\nvar _Log = require('./Log');\n\nvar _Log2 = _interopRequireDefault(_Log);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar FlagGame = function () {\n    function FlagGame(id, options) {\n        _classCallCheck(this, FlagGame);\n\n        var canvas = document.getElementById(id);\n        this.ctx = canvas.getContext('2d');\n        // const originWidth = window.innerWidth;\n        // const originHeight = window.innerHeight;\n        var originWidth = canvas.clientWidth;\n        var originHeight = canvas.clientHeight;\n        var scale = 2;\n        this.width = originWidth * scale;\n        this.height = originHeight * scale;\n        this.ctx.translate(1 / scale, 1 / scale);\n\n        canvas.width = this.width;\n        canvas.height = this.height;\n        this.options = options;\n        this.init();\n    }\n\n    _createClass(FlagGame, [{\n        key: 'init',\n        value: function init() {\n            //实例化月亮和星星。流星是随机时间生成，所以只初始化数组\n            var ctx = this.ctx,\n                width = this.width,\n                height = this.height;\n\n            var moon = new _Moon2.default(ctx, width, height, this.options.flag);\n            this.moon = moon;\n\n            var stars = new _Stars2.default(ctx, width, height, this.options.star);\n            this.stars = stars;\n            // const stars = [];\n\n            var myStars = [];\n            this.myStars = myStars;\n\n            var count = 0;\n\n            //每一帧动画生成函数\n            var pause = false;\n            var frame = function frame() {\n                //每隔10帧星星闪烁一次，节省计算资源\n                count++;\n                count % 20 == 0 && stars.blink();\n                // count % 10 == 0 && myStar.blink()\n                moon.draw();\n                stars.draw();\n                myStars.forEach(function (item) {\n                    item.draw();\n                });\n                requestAnimationFrame(frame);\n            };\n            frame();\n        }\n    }, {\n        key: 'transformPoint',\n        value: function transformPoint(number) {\n            var rect = this.moon.getFlagRect();\n            var area = rect.width * rect.height / 1000;\n            var width = rect.width,\n                height = rect.height;\n\n            var scale = width / height;\n\n            var bHeight = Math.sqrt(area / scale);\n            var bWidth = area / bHeight;\n\n            // 总列数\n            var cols = Math.floor(rect.width / bWidth);\n            var row = number / cols;\n            var col = number % cols;\n            // console.log(`number: ${number}, bWidth: ${bWidth}, bHeight:${bHeight}`);\n            // console.log(`rect: `, rect);\n            // console.log(`rect: ${rect}`, `col:${col}`, `row:${row}`);\n            return {\n                x: col * bWidth - bWidth / 2 + rect.x * 2,\n                y: row * bHeight - bHeight / 2 + rect.y\n            };\n        }\n    }, {\n        key: 'light',\n        value: function light(number, from, speed) {\n            this.light2(this.transformPoint(number), from, speed);\n        }\n    }, {\n        key: 'setStars',\n        value: function setStars(list) {\n            var _this = this;\n\n            var points = list.map(function (number) {\n                return _this.transformPoint(number);\n            });\n            // console.log(list, points);\n            this.stars.setStars(points);\n        }\n    }, {\n        key: 'setMyStars',\n        value: function setMyStars(list) {\n            var _this2 = this,\n                _myStars;\n\n            var ctx = this.ctx,\n                width = this.width,\n                height = this.height;\n\n            var points = list.map(function (number, index) {\n                var point = _this2.transformPoint(number);\n                console.dir(point);\n                return new _MyStar2.default(ctx, width, height, {\n                    x: point.x,\n                    y: point.y,\n                    frame: (index + 3) % 7,\n                    from: {\n                        x: width / 2,\n                        y: 0\n                    }\n                }, _this2.options.star);\n            });\n            // console.log(list, points);\n            (_myStars = this.myStars).push.apply(_myStars, _toConsumableArray(points));\n        }\n    }, {\n        key: 'light2',\n        value: function light2(e, from, speed) {\n            var ctx = this.ctx,\n                width = this.width,\n                height = this.height;\n\n            console.log(e);\n            var fromPosition = from ? from : { x: width / 2, y: height };\n            var star = new _MyStar2.default(ctx, width, height, {\n                x: e.x,\n                y: e.y,\n                frame: 3,\n                from: fromPosition\n            }, this.options.star, speed);\n            this.myStars.push(star);\n        }\n    }]);\n\n    return FlagGame;\n}();\n\nwindow.FlagGame = FlagGame;\n\n},{\"./Log\":1,\"./Meteor\":2,\"./Moon\":3,\"./MyStar\":4,\"./Stars\":5}]},{},[6])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvTG9nLmpzIiwic3JjL2pzL01ldGVvci5qcyIsInNyYy9qcy9Nb29uLmpzIiwic3JjL2pzL015U3Rhci5qcyIsInNyYy9qcy9TdGFycy5qcyIsInNyYy9qcy9tYWluLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7QUNBQSxJQUFNLE1BQU0sU0FBTixHQUFNLEdBQVc7QUFBQTs7QUFDckIsdUJBQVEsR0FBUixrQkFBWSxTQUFaLG9DQUEwQixTQUExQjtBQUNELENBRkQ7a0JBR2UsRzs7Ozs7Ozs7Ozs7OztJQ0hNLE07QUFDakIsb0JBQVksR0FBWixFQUFpQixDQUFqQixFQUFvQixDQUFwQixFQUF1QjtBQUFBOztBQUNuQixhQUFLLEdBQUwsR0FBVyxHQUFYO0FBQ0EsYUFBSyxDQUFMLEdBQVMsQ0FBVDtBQUNBLGFBQUssQ0FBTCxHQUFTLENBQVQ7QUFDQSxhQUFLLENBQUwsR0FBUyxDQUFUO0FBQ0EsYUFBSyxFQUFMLEdBQVUsRUFBRSxJQUFJLEtBQUssTUFBTCxLQUFnQixDQUF0QixDQUFWO0FBQ0EsYUFBSyxFQUFMLEdBQVUsQ0FBQyxLQUFLLEVBQWhCO0FBQ0EsYUFBSyxHQUFMLEdBQVcsS0FBSyxNQUFMLEtBQWdCLEdBQWhCLEdBQXNCLEdBQWpDO0FBQ0EsZ0JBQVEsR0FBUixDQUFZLEtBQUssQ0FBakIsRUFBb0IsS0FBSyxDQUF6QixFQUE0QixLQUFLLENBQWpDLEVBQW9DLEtBQUssR0FBekM7QUFDSDs7OzsrQkFFTTtBQUNIO0FBQ0EsZ0JBQUksS0FBSyxDQUFMLEdBQVMsQ0FBQyxLQUFLLEdBQWYsSUFBc0IsS0FBSyxDQUFMLEdBQVMsS0FBSyxDQUFMLEdBQVMsS0FBSyxHQUFqRCxFQUFzRDtBQUNsRCx1QkFBTyxLQUFQO0FBQ0g7QUFDRDtBQUNBLGlCQUFLLENBQUwsSUFBVSxLQUFLLEVBQWY7QUFDQSxtQkFBTyxJQUFQO0FBQ0g7OzsrQkFF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VCxDQUFQO0FBU0gsYUFaYyxDQUFmO0FBYUE7QUFDQSw2QkFBSyxPQUFMLEVBQWEsSUFBYixvQ0FBcUIsTUFBckI7QUFDSDs7OytCQUNNLEMsRUFBRyxJLEVBQU0sSyxFQUFPO0FBQUEsZ0JBQ1gsR0FEVyxHQUNZLElBRFosQ0FDWCxHQURXO0FBQUEsZ0JBQ04sS0FETSxHQUNZLElBRFosQ0FDTixLQURNO0FBQUEsZ0JBQ0MsTUFERCxHQUNZLElBRFosQ0FDQyxNQUREOztBQUVuQixvQkFBUSxHQUFSLENBQVksQ0FBWjtBQUNBLGdCQUFNLGVBQWUsT0FBTyxJQUFQLEdBQWEsRUFBRSxHQUFHLFFBQU0sQ0FBWCxFQUFjLEdBQUcsTUFBakIsRUFBbEM7QUFDQSxnQkFBTSxPQUFPLElBQUksZ0JBQUosQ0FBVyxHQUFYLEVBQWdCLEtBQWhCLEVBQXVCLE1BQXZCLEVBQStCO0FBQ3hDLG1CQUFHLEVBQUUsQ0FEbUM7QUFFeEMsbUJBQUcsRUFBRSxDQUZtQztBQUd4Qyx1QkFBTyxDQUhpQztBQUl4QyxzQkFBTTtBQUprQyxhQUEvQixFQUtWLEtBQUssT0FBTCxDQUFhLElBTEgsRUFLUyxLQUxULENBQWI7QUFNQSxpQkFBSyxPQUFMLENBQWEsSUFBYixDQUFrQixJQUFsQjtBQUNIOzs7Ozs7QUFHTCxPQUFPLFFBQVAsR0FBa0IsUUFBbEIiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJjb25zdCBsb2cgPSBmdW5jdGlvbigpIHtcclxuICBjb25zb2xlLmxvZygnY2FudmFzICcsIC4uLmFyZ3VtZW50cylcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgbG9nO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBNZXRlb3Ige1xyXG4gICAgY29uc3RydWN0b3IoY3R4LCB4LCBoKSB7XHJcbiAgICAgICAgdGhpcy5jdHggPSBjdHhcclxuICAgICAgICB0aGlzLnggPSB4XHJcbiAgICAgICAgdGhpcy55ID0gaFxyXG4gICAgICAgIHRoaXMuaCA9IGhcclxuICAgICAgICB0aGlzLnZ4ID0gLSg0ICsgTWF0aC5yYW5kb20oKSAqIDQpXHJcbiAgICAgICAgdGhpcy52eSA9IC10aGlzLnZ4XHJcbiAgICAgICAgdGhpcy5sZW4gPSBNYXRoLnJhbmRvbSgpICogNTAwICsgMTAwXHJcbiAgICAgICAgY29uc29sZS5sb2codGhpcy54LCB0aGlzLnksIHRoaXMuaCwgdGhpcy5sZW4pO1xyXG4gICAgfVxyXG5cclxuICAgIGZsb3coKSB7XHJcbiAgICAgICAgLy/liKTlrprmtYHmmJ/lh7rnlYxcclxuICAgICAgICBpZiAodGhpcy54IDwgLXRoaXMubGVuIHx8IHRoaXMueSA+IHRoaXMuaCArIHRoaXMubGVuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyB0aGlzLnggKz0gdGhpcy52eFxyXG4gICAgICAgIHRoaXMueSAtPSB0aGlzLnZ5XHJcbiAgICAgICAgcmV0dXJuIHRydWVcclxuICAgIH1cclxuXHJcbiAgICBkcmF3KCkge1xyXG4gICAgICAgIGxldCBjdHggPSB0aGlzLmN0eCxcclxuICAgICAgICAgICAgLy/lvoTlkJHmuJDlj5jvvIzku47mtYHmmJ/lpLTlsL7lnIblv4PvvIzljYrlvoTotorlpKfvvIzpgI/mmI7luqbotorpq5hcclxuICAgICAgICAgICAgZ3JhID0gY3R4LmNyZWF0ZVJhZGlhbEdyYWRpZW50KFxyXG4gICAgICAgICAgICAgICAgdGhpcy54LCB0aGlzLnksIDAsIHRoaXMueCwgdGhpcy55LCB0aGlzLmxlbilcclxuXHJcbiAgICAgICAgY29uc3QgUEkgPSBNYXRoLlBJXHJcbiAgICAgICAgZ3JhLmFkZENvbG9yU3RvcCgwLCAncmdiYSgyNTUsMjU1LDI1NSwxKScpXHJcbiAgICAgICAgZ3JhLmFkZENvbG9yU3RvcCgxLCAncmdiYSgyNTUsMjU1LDI1NSwwKScpXHJcbiAgICAgICAgY3R4LnNhdmUoKVxyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBncmFcclxuICAgICAgICBjdHguYmVnaW5QYXRoKClcclxuICAgICAgICAvL+a1geaYn+WktO+8jOS6jOWIhuS5i+S4gOWchlxyXG4gICAgICAgIGN0eC5hcmModGhpcy54LCB0aGlzLnksIE1hdGgucmFuZG9tKCkgKiAyICsgMSwgUEkgLyA0LCA1ICogUEkgLyA0KVxyXG4gICAgICAgIC8v57uY5Yi25rWB5pif5bC+77yM5LiJ6KeS5b2iXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2xpbmVUbzogJywgdGhpcy54ICsgdGhpcy5sZW4sIHRoaXMueSAtIHRoaXMubGVuKTtcclxuICAgICAgICAvLyBjdHgubGluZVRvKHRoaXMueCArIHRoaXMubGVuLCB0aGlzLnkgKyB0aGlzLmxlbilcclxuICAgICAgICBjdHgubGluZVRvKHRoaXMueCArIHRoaXMubGVuLCB0aGlzLnkgLSB0aGlzLmxlbilcclxuICAgICAgICBjdHguY2xvc2VQYXRoKClcclxuICAgICAgICBjdHguZmlsbCgpXHJcbiAgICAgICAgY3R4LnJlc3RvcmUoKVxyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9vbiB7XHJcbiAgICBjb25zdHJ1Y3RvcihjdHgsIHdpZHRoLCBoZWlnaHQsIGltYWdlKSB7XHJcbiAgICAgICAgdGhpcy5jdHggPSBjdHhcclxuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGhcclxuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodFxyXG4gICAgICAgIC8vIHRoaXMuaW1hZ2VzID0gaW1hZ2VzO1xyXG4gICAgICAgIC8vIGRlYnVnZ2VyO1xyXG4gICAgICAgIGNvbnN0IHBpY0ZsYWcgPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICBwaWNGbGFnLnNyYyA9IGltYWdlO1xyXG4gICAgICAgIHRoaXMucGljRmxhZyA9IHBpY0ZsYWc7XHJcbiAgICAgICAgcGljRmxhZy5vbmxvYWQgPSBlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZWFkeSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGltYWdlcyk7XHJcbiAgICAgICAgLy8gdGhpcy5kcmF3QmcoKTtcclxuICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgIH1cclxuICAgIGdldEZsYWdSZWN0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZsYWdSZWN0O1xyXG4gICAgfVxyXG4gICAgZHJhd0ZsYWcoKSB7XHJcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5jdHg7XHJcbiAgICAgICAgY29uc3QgcGljID0gdGhpcy5waWNGbGFnO1xyXG4gICAgICAgIC8vIHBpYy5zcmMgPSB0aGlzLmltYWdlcy5mbGFnO1xyXG4gICAgICAgIGN0eC5zYXZlKClcclxuICAgICAgICAvLyBjdHguZ2xvYmFsQWxwaGEgPSAwLjUxO1xyXG4gICAgICAgIGNvbnN0IG9mZnNldFggPSAyMDtcclxuICAgICAgICBjb25zdCBvZmZzZXRZID0gNzA7XHJcbiAgICAgICAgY29uc3QgZHJhd1dpZHRoID0gdGhpcy53aWR0aCAtIG9mZnNldFggKiAyO1xyXG4gICAgICAgIGNvbnN0IGRyYXdIZWlnaHQgPSBkcmF3V2lkdGggKiBwaWMuaGVpZ2h0IC8gcGljLndpZHRoO1xyXG4gICAgICAgIHRoaXMuZmxhZ1JlY3QgPSB7XHJcbiAgICAgICAgICAgIHg6IG9mZnNldFgsXHJcbiAgICAgICAgICAgIHk6IG9mZnNldFksXHJcbiAgICAgICAgICAgIHdpZHRoOiBkcmF3V2lkdGgsXHJcbiAgICAgICAgICAgIGhlaWdodDogZHJhd0hlaWdodCxcclxuICAgICAgICB9XHJcbiAgICAgICAgY3R4LnNoYWRvd0JsdXIgPSA4MDtcclxuICAgICAgICBjdHguc2hhZG93Q29sb3IgPSBcInJnYmEoMCwgMCwgMCwgMC4yKVwiO1xyXG4gICAgICAgIC8vIGN0eC5zaGFkb3dDb2xvciA9IFwicmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpXCI7XHJcbiAgICAgICAgLy8gY3R4LnNoYWRvd0NvbG9yID0gXCJSR0IoMjU1LDI0NiwzMywgMC44KVwiO1xyXG4gICAgICAgIC8vIGN0eC5zaGFkb3dDb2xvciA9IFwiUkdCKDE4OSwwLDEwLCAwLjgpXCI7XHJcbiAgICAgICAgY3R4LnNoYWRvd09mZnNldFggPSAwO1xyXG4gICAgICAgIGN0eC5zaGFkb3dPZmZzZXRZID0gNTA7XHJcbiAgICAgICAgLy8gY3R4LmNsZWFyUmVjdChvZmZzZXRYLCBvZmZzZXRZLCBkcmF3V2lkdGgsIGRyYXdIZWlnaHQpO1xyXG4gICAgICAgIGN0eC5kcmF3SW1hZ2UoXHJcbiAgICAgICAgICAgIHBpYywgXHJcbiAgICAgICAgICAgIDAsIDAsIHBpYy53aWR0aCwgcGljLmhlaWdodCxcclxuICAgICAgICAgICAgb2Zmc2V0WCwgb2Zmc2V0WSwgZHJhd1dpZHRoLCBkcmF3SGVpZ2h0KTtcclxuICAgICAgICBjdHgucmVzdG9yZSgpXHJcbiAgICB9XHJcbiAgICBkcmF3QmcoKSB7XHJcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5jdHg7XHJcbiAgICAgICAgY3R4LnNhdmUoKVxyXG4gICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xyXG4gICAgICAgIC8vIGN0eC5nbG9iYWxBbHBoYSA9IDAuMTtcclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMCwgMCwgMCwgMCknO1xyXG4gICAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XHJcbiAgICAgICAgLy8gY29uc3QgZHJhd1dpZHRoID0gdGhpcy53aWR0aCAtIDIwO1xyXG4gICAgICAgIC8vIGN0eC5kcmF3SW1hZ2UoXHJcbiAgICAgICAgLy8gICAgIHBpYywgXHJcbiAgICAgICAgLy8gICAgIDAsIDAsIHBpYy53aWR0aCwgcGljLmhlaWdodCxcclxuICAgICAgICAvLyAgICAgMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xyXG4gICAgICAgIGN0eC5yZXN0b3JlKClcclxuICAgIH1cclxuICAgIGRyYXcoKSB7XHJcbiAgICAgICAgdGhpcy5kcmF3QmcoKTtcclxuICAgICAgICB0aGlzLmRyYXdGbGFnKCk7XHJcbiAgICB9XHJcbiAgICBkcmF3MSgpIHtcclxuICAgICAgICBsZXQgY3R4ID0gdGhpcy5jdHgsXHJcbiAgICAgICAgICAgIGdyYWRpZW50ID0gY3R4LmNyZWF0ZVJhZGlhbEdyYWRpZW50KFxyXG4gICAgICAgICAgICAyMDAsIDIwMCwgMzAsIDEwMCwgMjAwLCA4MDApXHJcbiAgICAgICAgLy/lvoTlkJHmuJDlj5hcclxuICAgICAgICBncmFkaWVudC5hZGRDb2xvclN0b3AoMCwgJ3JnYigyNTUsMjU1LDI1NSknKVxyXG4gICAgICAgIGdyYWRpZW50LmFkZENvbG9yU3RvcCgwLjAxLCAncmdiKDcwLDcwLDgwKScpXHJcbiAgICAgICAgZ3JhZGllbnQuYWRkQ29sb3JTdG9wKDAuMiwgJ3JnYig0MCw0MCw1MCknKVxyXG4gICAgICAgIGdyYWRpZW50LmFkZENvbG9yU3RvcCgwLjQsICdyZ2IoMjAsMjAsMzApJylcclxuICAgICAgICBncmFkaWVudC5hZGRDb2xvclN0b3AoMSwgJ3JnYigwLDAsMTApJylcclxuICAgICAgICBjdHguc2F2ZSgpXHJcbiAgICAgICAgLy8gY3R4LmZpbGxTdHlsZSA9IGdyYWRpZW50XHJcbiAgICAgICAgLy8gY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDAsIDAsIDAsIDApJztcclxuICAgICAgICBjdHguZmlsbFJlY3QoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpXHJcbiAgICAgICAgY3R4LnJlc3RvcmUoKVxyXG4gICAgfVxyXG59IiwiLyoqXHJcbiAqIOaIkeeCueS6rueahOaYn+aYn1xyXG4gKiDntKDmnZDkvb/nlKjkuIDkuKo3IHggMeWMheWQq+mXqueDgeaYn+aYn+eahDfluKflm77niYdcclxuICog5q+P5qyh5L6d5qyh57uY5Yi256ysMSAtIDcg5binXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXREaXN0YW5jZShzeCwgc3ksIGV4LCBleSkge1xyXG4gICAgcmV0dXJuIE1hdGgucG93KGV4IC0gc3gsIDIpICsgTWF0aC5wb3coZXkgLSBzeSwgMik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uICBnZXREaXN0YW5jZShvYmoxLCBvYmoyKXsgIFxyXG4gcmV0dXJuIE1hdGguc3FydCgob2JqMS54LW9qYjIueCkgKiAob2JqMS54IC0gb2piMi54KSArIChvYmoxLnkgLSBvamIyLnkpICogKG9iajEueSAtIG9qYjIueSkpOyAgXHJcbn1cclxuXHJcbmZ1bmN0aW9uICBnZXRNb3ZlT2Zmc2V0KHN0YXJ0LCBlbmQpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbihkaXN0YW5jZSkge1xyXG4gICAgICAgIC8vIGNvbnN0IHoyID0gTWF0aC5wb3coZGlzdGFuY2UsIDIpO1xyXG4gICAgICAgIGNvbnN0IHggPSBNYXRoLmFicyhlbmQueCAtIHN0YXJ0LngpO1xyXG4gICAgICAgIGNvbnN0IHkgPSBNYXRoLmFicyhlbmQueSAtIHN0YXJ0LnkpO1xyXG4gICAgICAgIGNvbnN0IHogPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSk7XHJcbiAgICAgICAgY29uc3Qgb2Zmc2V0WCA9IHggKiBkaXN0YW5jZSAvIHo7XHJcbiAgICAgICAgY29uc3Qgb2Zmc2V0WSA9IHkgKiBkaXN0YW5jZSAvIHo7XHJcbiAgICAgICAgY29uc3QgeFNpZ24gPSBlbmQueCA+IHN0YXJ0LnggPyAxIDogLTE7XHJcbiAgICAgICAgY29uc3QgeVNpZ24gPSBlbmQueSA+IHN0YXJ0LnkgPyAxIDogLTE7XHJcbiAgICAgICAgLy8gY29uc3QgaXNFbmQgPSBmYWxzZTtcclxuICAgICAgICAvLyBpZiAoaXNFbmQpIHJldHVybiBlbmQ7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHg6IG9mZnNldFggKiB4U2lnbixcclxuICAgICAgICAgIHk6IG9mZnNldFkgKnlTaWduLFxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RhcnMge1xyXG4gICAgY29uc3RydWN0b3IoY3R4LCB3aWR0aCwgaGVpZ2h0LCBzdGFyLCBpbWFnZSwgc3BlZWQgPSAxMCkge1xyXG4gICAgICAgIHRoaXMuY3R4ID0gY3R4XHJcbiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoXHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHRcclxuICAgICAgICB0aGlzLnN0YXJzID0gW3N0YXJdO1xyXG4gICAgICAgIHRoaXMuY291bnRzID0gMDtcclxuICAgICAgICB0aGlzLmVuZCA9IGZhbHNlO1xyXG4gICAgICAgIGNvbnN0IHN0YXJQaWMgPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICBzdGFyUGljLnNyYyA9IGltYWdlO1xyXG4gICAgICAgIHRoaXMuc3RhclBpYyA9IHN0YXJQaWM7XHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBNYXRoLnJhbmRvbSgpID4gMCA/IDEgOiAtMTtcclxuICAgICAgICAvLyBjb25zdCBzcGVlZCAgPSAxMDtcclxuICAgICAgICB0aGlzLm1vdmVPZmZzZXQgPSBnZXRNb3ZlT2Zmc2V0KFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgeDogc3Rhci5mcm9tLngsXHJcbiAgICAgICAgICAgICAgeTogc3Rhci5mcm9tLnksXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHg6IHN0YXIueCxcclxuICAgICAgICAgICAgICAgIHk6IHN0YXIueSxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgKShzcGVlZCk7XHJcbiAgICB9XHJcbiAgICAvKiBzZXRJbWFnZShpbWFnZSkge1xyXG4gICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTtcclxuICAgIH0gKi9cclxuICAgIGRyYXcoKSB7XHJcbiAgICAgICAgbGV0IGN0eCA9IHRoaXMuY3R4XHJcbiAgICAgICAgY3R4LnNhdmUoKVxyXG4gICAgICAgIGNvbnN0IHN0YXJQaWMgPSB0aGlzLnN0YXJQaWM7XHJcbiAgICAgICAgLy8gc3RhclBpYy5zcmMgPSB0aGlzLmltYWdlO1xyXG4gICAgICAgIC8vIGN0eC5nbG9iYWxBbHBoYSA9IDAuMjtcclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3doaXRlJ1xyXG4gICAgICAgIHRoaXMuc3RhcnMuZm9yRWFjaChzdGFyID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gdGhpcy5tb3ZlT2Zmc2V0O1xyXG4gICAgICAgICAgICBjb25zdCBkcmF3UG9zID0ge1xyXG4gICAgICAgICAgICAgICAgeDogc3Rhci5mcm9tLnggKyBvZmZzZXQueCxcclxuICAgICAgICAgICAgICAgIHk6IHN0YXIuZnJvbS55ICsgb2Zmc2V0LnksXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChkcmF3UG9zLnkgPD0gc3Rhci55KSB7XHJcbiAgICAgICAgICAgICAgICBkcmF3UG9zLnggPSBzdGFyLng7XHJcbiAgICAgICAgICAgICAgICBkcmF3UG9zLnkgPSBzdGFyLnk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVuZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzdGFyLmZyb20ueCA9IGRyYXdQb3MueDtcclxuICAgICAgICAgICAgICAgIHN0YXIuZnJvbS55ID0gZHJhd1Bvcy55O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHN0YXIsIGRyYXdQb3MsIG9mZnNldCk7XHJcbiAgICAgICAgICAgIC8vIGNvbnN0IGRpc3RhbmNlID0gZ2V0RGlzdGFuY2Uoc3Rhci5mcm9tLCBzdGFyKTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3N0YXI6ICcsIHN0YXIsIHgsIHkpO1xyXG4gICAgICAgICAgICBjb25zdCBmcmFtZXMgPSA3O1xyXG4gICAgICAgICAgICBjb25zdCBzY2FsZSA9IDE7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXJTaXplID0gNyAqIDYuNTtcclxuICAgICAgICAgICAgY29uc3QgZWFjaFdpZHRoID0gc3RhclBpYy53aWR0aCAvIGZyYW1lcyAqIHNjYWxlO1xyXG4gICAgICAgICAgICBjb25zdCBlYWNoSGVpZ2h0ID0gc3RhclBpYy5oZWlnaHQgKiBzY2FsZTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZWFjaFdpZHRoLCBlYWNoSGVpZ2h0KTtcclxuXHJcbiAgICAgICAgICAgIC8vIOS4reW/g+WPkeWFieaViOaenFxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZW5kKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHg6IGRyYXdQb3MueCArIHN0YXJTaXplIC8gMiwgXHJcbiAgICAgICAgICAgICAgICAgICAgeTogZHJhd1Bvcy55ICsgc3RhclNpemUgLyAyLFxyXG4gICAgICAgICAgICAgICAgICAgIHI6IHN0YXJTaXplIC8gM1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gY3R4Lmdsb2JhbEFscGhhID0gMC41O1xyXG4gICAgICAgICAgICAgICAgdmFyIGdyYWRpZW50ID0gY3R4LmNyZWF0ZVJhZGlhbEdyYWRpZW50KGNlbnRlci54LCBjZW50ZXIueSwgMCwgY2VudGVyLngsIGNlbnRlci55LCBjZW50ZXIucik7XHJcbiAgICAgICAgICAgICAgICAvLyB2YXIgZ3JhZGllbnQgPSBjdHguY3JlYXRlUmFkaWFsR3JhZGllbnQoZHJhd1Bvcy54ICsgc3RhclNpemUgLyAyLCBkcmF3UG9zLnkgKyBzdGFyU2l6ZSAvIDIsIDAsIGRyYXdQb3MueCArIHN0YXJTaXplIC8gMiwgZHJhd1Bvcy55ICsgc3RhclNpemUgLyAyLCBzdGFyU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICBncmFkaWVudC5hZGRDb2xvclN0b3AoMCwgXCJyZ2JhKDI1NSwgMjU1LCAyNTUsIDEpXCIpO1xyXG4gICAgICAgICAgICAgICAgZ3JhZGllbnQuYWRkQ29sb3JTdG9wKDEsIFwicmdiYSgyNTUsIDI1NSwgMjU1LCAwKVwiKTtcclxuICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBncmFkaWVudDtcclxuICAgICAgICAgICAgICAgIC8vIGN0eC5maWxsUmVjdChkcmF3UG9zLngsIGRyYXdQb3MueSwgc3RhclNpemUsIHN0YXJTaXplKTsgXHJcbiAgICAgICAgICAgICAgICBjdHguYXJjKGNlbnRlci54LCBjZW50ZXIueSwgY2VudGVyLnIsIDAsIDIqTWF0aC5QSSk7XHJcbiAgICAgICAgICAgICAgICBjdHguZmlsbCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIOaYn+aYn+aXi+i9rFxyXG4gICAgICAgICAgICBpZiAodGhpcy5lbmQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1vdmUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeDogZHJhd1Bvcy54ICsgZWFjaFdpZHRoIC8gMixcclxuICAgICAgICAgICAgICAgICAgICB5OiBkcmF3UG9zLnkgKyBlYWNoSGVpZ2h0IC8gMixcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGN0eC50cmFuc2xhdGUobW92ZS54LCBtb3ZlLnkpXHJcbiAgICAgICAgICAgICAgICBjdHgucm90YXRlKHRoaXMuZGlyZWN0aW9uICogdGhpcy5jb3VudHMgKiAoTWF0aC5QSSAvIDM2MCkpO1xyXG4gICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSgtIG1vdmUueCwgLW1vdmUueSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjdHguZHJhd0ltYWdlKFxyXG4gICAgICAgICAgICAgICAgc3RhclBpYywgXHJcbiAgICAgICAgICAgICAgICBzdGFyLmZyYW1lICogZWFjaFdpZHRoLCAwLCAvLyDliarliIfljp/ngrlcclxuICAgICAgICAgICAgICAgIGVhY2hXaWR0aCwgZWFjaEhlaWdodCwgLy8g5Ymq5YiH5a696auYXHJcbiAgICAgICAgICAgICAgICBkcmF3UG9zLngsIGRyYXdQb3MueSwgLy8g57uY5Yi25Y6f54K5XHJcbiAgICAgICAgICAgICAgICBlYWNoV2lkdGggLCBlYWNoSGVpZ2h0LCAvLyDnu5jliLblrr3pq5hcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIGN0eC5yZXN0b3JlKClcclxuXHJcbiAgICAgICAgLy8g57uY5Yi26K6h5pWwXHJcbiAgICAgICAgdGhpcy5jb3VudHMrKztcclxuICAgICAgICAvLyDov5DliqjlgZzmraLlkI7miY3lvIDlp4vpl6rng4FcclxuICAgICAgICBpZiAodGhpcy5lbmQgJiYgdGhpcy5jb3VudHMgJSAxMCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmJsaW5rKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8v6Zeq54OB77yM5pif5pif5Y2K5b6E5q+P6ZqUMTDluKfpmo/mnLrlj5jlpKfmiJblj5jlsI9cclxuICAgIGJsaW5rKCkge1xyXG4gICAgICAgIHRoaXMuc3RhcnMgPSB0aGlzLnN0YXJzLm1hcChzdGFyPT4ge1xyXG4gICAgICAgICAgICBzdGFyLmZyYW1lICs9IDE7XHJcbiAgICAgICAgICAgIHN0YXIuZnJhbWUgJT0gNztcclxuICAgICAgICAgICAgLy8gc3Rhci54ICs9IE1hdGgucmFuZG9tKCkgKiAxLjU7XHJcbiAgICAgICAgICAgIC8vIHN0YXIueSArPSBNYXRoLnJhbmRvbSgpICogMS41O1xyXG4gICAgICAgICAgICByZXR1cm4gc3RhclxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RhcnMge1xyXG4gICAgY29uc3RydWN0b3IoY3R4LCB3aWR0aCwgaGVpZ2h0LCBpbWFnZSkge1xyXG4gICAgICAgIHRoaXMuY3R4ID0gY3R4XHJcbiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoXHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHRcclxuICAgICAgICB0aGlzLnN0YXJzID0gW11cclxuICAgICAgICAvLyB0aGlzLnN0YXJzID0gW11cclxuICAgICAgICB0aGlzLmNvdW50ID0gMDtcclxuICAgICAgICBjb25zdCBzdGFyUGljID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgc3RhclBpYy5zcmMgPSBpbWFnZTtcclxuICAgICAgICB0aGlzLnN0YXJQaWMgPSBzdGFyUGljO1xyXG4gICAgfVxyXG4gICAgZ2V0U3RhcnMoYW1vdW50KSB7XHJcbiAgICAgICAgbGV0IHN0YXJzID0gW11cclxuICAgICAgICB3aGlsZSAoYW1vdW50LS0pIHtcclxuICAgICAgICAgICAgc3RhcnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICB4OiBNYXRoLnJhbmRvbSgpICogdGhpcy53aWR0aCxcclxuICAgICAgICAgICAgICAgIHk6IE1hdGgucmFuZG9tKCkgKiB0aGlzLmhlaWdodCxcclxuICAgICAgICAgICAgICAgIHI6IE1hdGgucmFuZG9tKCkgKyAyLjdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHN0YXJzXHJcbiAgICB9XHJcbiAgICBzZXRTdGFycyhwb3MpIHtcclxuICAgICAgICB0aGlzLnN0YXJzID0gcG9zLm1hcChpdGVtID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHg6IGl0ZW0ueCxcclxuICAgICAgICAgICAgICAgIHk6IGl0ZW0ueSxcclxuICAgICAgICAgICAgICAgIHI6IE1hdGgucmFuZG9tKCkgKyAxLjUsXHJcbiAgICAgICAgICAgICAgICBmcmFtZTogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNyksXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGRyYXcoKSB7XHJcbiAgICAgICAgbGV0IGN0eCA9IHRoaXMuY3R4XHJcbiAgICAgICAgY3R4LnNhdmUoKVxyXG4gICAgICAgIC8vIGN0eC5maWxsU3R5bGUgPSAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpJ1xyXG4gICAgICAgIGNvbnN0IHN0YXJQaWMgPSB0aGlzLnN0YXJQaWM7XHJcbiAgICAgICAgY29uc3QgZnJhbWVzID0gNztcclxuICAgICAgICBjb25zdCBzdGFyU2l6ZSA9IDcgKiAzO1xyXG4gICAgICAgIGNvbnN0IGVhY2hXaWR0aCA9IHN0YXJQaWMud2lkdGggLyBmcmFtZXM7XHJcbiAgICAgICAgY29uc3QgZWFjaEhlaWdodCA9IHN0YXJQaWMuaGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuc3RhcnMuZm9yRWFjaChzdGFyPT4ge1xyXG4gICAgICAgICAgICAvLyBjdHguZ2xvYmFsQWxwaGEgPSBzdGFyLmZyYW1lICUgMztcclxuICAgICAgICAgICAgLy8gdmFyIGdyYWRpZW50ID0gY3R4LmNyZWF0ZVJhZGlhbEdyYWRpZW50KHN0YXIueCwgc3Rhci55LCAwLCBzdGFyLngsIHN0YXIueSwgc3Rhci5yKTtcclxuICAgICAgICAgICAgLy8gZ3JhZGllbnQuYWRkQ29sb3JTdG9wKDAsIFwicmdiYSgyNTUsIDI1NSwgMjU1LCAxKVwiKTtcclxuICAgICAgICAgICAgLy8gZ3JhZGllbnQuYWRkQ29sb3JTdG9wKDEsIFwicmdiYSgyNTUsIDI1NSwgMjU1LCAwKVwiKTtcclxuICAgICAgICAgICAgLy8gY3R4LmZpbGxTdHlsZSA9IGdyYWRpZW50O1xyXG4gICAgICAgICAgICBjdHguZHJhd0ltYWdlKFxyXG4gICAgICAgICAgICAgICAgc3RhclBpYywgXHJcbiAgICAgICAgICAgICAgICBzdGFyLmZyYW1lICogZWFjaFdpZHRoLCAwLCAvLyDliarliIfljp/ngrlcclxuICAgICAgICAgICAgICAgIGVhY2hXaWR0aCwgZWFjaEhlaWdodCwgLy8g5Ymq5YiH5a696auYXHJcbiAgICAgICAgICAgICAgICBzdGFyLngsIHN0YXIueSwgLy8g57uY5Yi25Y6f54K5XHJcbiAgICAgICAgICAgICAgICBzdGFyU2l6ZSAsIHN0YXJTaXplLCAvLyDnu5jliLblrr3pq5hcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgLy8gY3R4LmJlZ2luUGF0aCgpXHJcbiAgICAgICAgICAgIC8vIGN0eC5hcmMoc3Rhci54LCBzdGFyLnksIHN0YXIuciwgMCwgMiAqIE1hdGguUEkpXHJcbiAgICAgICAgICAgIC8vIGN0eC5maWxsKClcclxuICAgICAgICB9KVxyXG4gICAgICAgIHRoaXMuY291bnQgKz0gMTtcclxuICAgICAgICBjdHgucmVzdG9yZSgpXHJcbiAgICB9XHJcbiAgICBnZXRNb3ZlKHgsIHkpIHtcclxuICAgICAgICBjb25zdCBjZW50ZXIgPSB7XHJcbiAgICAgICAgICAgIHg6IHRoaXMueCAvIDQsXHJcbiAgICAgICAgICAgIHk6IHRoaXMueSAvIDJcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY29uc3QgW3gsIHldID0gW1xyXG4gICAgICAgIC8vICAgICBveCAtIGNlbnRlci54LFxyXG4gICAgICAgIC8vICAgICBveSAtIGNlbnRlci55LFxyXG4gICAgICAgIC8vIF1cclxuICAgICAgICBjb25zdCBtb3ZlID0gTWF0aC5yYW5kb20oKSAqIDI7XHJcbiAgICAgICAgY29uc3QgYW5nbGUgPSAxO1xyXG4gICAgICAgIC8vIGNvbnN0IHgxID0gTWF0aC5jb3MoYW5nbGUpICogeCAtIE1hdGguc2luKGFuZ2xlKSAqIHk7XHJcbiAgICAgICAgLy8gY29uc3QgeTEgPSBNYXRoLmNvcyhhbmdsZSkgKiB5ICsgTWF0aC5zaW4oYW5nbGUpICogeDtcclxuXHJcbiAgICAgICAgY29uc3QgeDE9ICh4IC0gY2VudGVyLngpKk1hdGguY29zKGFuZ2xlKSAtICh5IC0gY2VudGVyLnkpKk1hdGguc2luKGFuZ2xlKSArIGNlbnRlci54IDtcclxuICAgICAgICBjb25zdCB5MT0gKHggLSBjZW50ZXIueCkqTWF0aC5zaW4oYW5nbGUpICsgKHkgLSBjZW50ZXIueSkqTWF0aC5jb3MoYW5nbGUpICsgY2VudGVyLnkgO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB4OiB4MSxcclxuICAgICAgICAgICAgeTogeTEsXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy/pl6rng4HvvIzmmJ/mmJ/ljYrlvoTmr4/pmpQxMOW4p+maj+acuuWPmOWkp+aIluWPmOWwj1xyXG4gICAgYmxpbmsoKSB7XHJcbiAgICAgICAgdGhpcy5zdGFycyA9IHRoaXMuc3RhcnMubWFwKHN0YXI9PiB7XHJcbiAgICAgICAgICAgIGxldCBzaWduID0gTWF0aC5yYW5kb20oKSA+IDAuNSA/IDEgOiAtMVxyXG4gICAgICAgICAgICBzdGFyLnIgKz0gc2lnbiAqIDAuMlxyXG4gICAgICAgICAgICBpZiAoc3Rhci5yIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgc3Rhci5yID0gLXN0YXIuclxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXIuciA+IDEuNSkge1xyXG4gICAgICAgICAgICAgICAgc3Rhci5yIC09IDAuMlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN0YXIuZnJhbWUgKz0gMTtcclxuICAgICAgICAgICAgc3Rhci5mcmFtZSAlPSA3O1xyXG4gICAgICAgICAgICAvLyBjb25zdCBtb3ZlID0gdGhpcy5nZXRNb3ZlKHN0YXIueCwgc3Rhci55KTtcclxuICAgICAgICAgICAgLy8gc3Rhci54ID0gc3Rhci54ICs9IHNpZ247XHJcbiAgICAgICAgICAgIC8vIHN0YXIueSA9IHN0YXIueSArPSBzaWduO1xyXG4gICAgICAgICAgICAvLyBpZiAodGhpcy5jb3VudCAlIDEwID09IDApIHtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICByZXR1cm4gc3RhclxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgfVxyXG59IiwiaW1wb3J0IFN0YXJzIGZyb20gJy4vU3RhcnMnXHJcbmltcG9ydCBNb29uICAgICBmcm9tICcuL01vb24nXHJcbmltcG9ydCBNZXRlb3IgICBmcm9tICcuL01ldGVvcidcclxuaW1wb3J0IE15U3RhciAgIGZyb20gJy4vTXlTdGFyJ1xyXG5pbXBvcnQgbG9nICAgZnJvbSAnLi9Mb2cnXHJcblxyXG4gY2xhc3MgRmxhZ0dhbWUge1xyXG4gICAgY29uc3RydWN0b3IoaWQsIG9wdGlvbnMpIHtcclxuICAgICAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gICAgICAgIHRoaXMuY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICAgICAgLy8gY29uc3Qgb3JpZ2luV2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgICAgICAvLyBjb25zdCBvcmlnaW5IZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICAgICAgY29uc3Qgb3JpZ2luV2lkdGggPSBjYW52YXMuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgY29uc3Qgb3JpZ2luSGVpZ2h0ID0gY2FudmFzLmNsaWVudEhlaWdodDtcclxuICAgICAgICBjb25zdCBzY2FsZSA9IDI7XHJcbiAgICAgICAgdGhpcy53aWR0aCA9IG9yaWdpbldpZHRoICogc2NhbGVcclxuICAgICAgICB0aGlzLmhlaWdodCA9IG9yaWdpbkhlaWdodCAqIHNjYWxlO1xyXG4gICAgICAgIHRoaXMuY3R4LnRyYW5zbGF0ZSgxIC8gc2NhbGUsIDEgLyBzY2FsZSk7XHJcbiAgICBcclxuICAgICAgICBjYW52YXMud2lkdGggPSB0aGlzLndpZHRoXHJcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IHRoaXMuaGVpZ2h0XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcclxuICAgICAgICB0aGlzLmluaXQoKTtcclxuICAgIH1cclxuICAgIGluaXQoKSB7XHJcbiAgICAgICAgLy/lrp7kvovljJbmnIjkuq7lkozmmJ/mmJ/jgILmtYHmmJ/mmK/pmo/mnLrml7bpl7TnlJ/miJDvvIzmiYDku6Xlj6rliJ3lp4vljJbmlbDnu4RcclxuICAgICAgICBjb25zdCB7IGN0eCwgd2lkdGgsIGhlaWdodCB9ID0gdGhpcztcclxuICAgICAgICBjb25zdCBtb29uID0gbmV3IE1vb24oY3R4LCB3aWR0aCwgaGVpZ2h0LCB0aGlzLm9wdGlvbnMuZmxhZyk7XHJcbiAgICAgICAgdGhpcy5tb29uID0gbW9vbjtcclxuXHJcbiAgICAgICAgY29uc3Qgc3RhcnMgPSBuZXcgU3RhcnMoY3R4LCB3aWR0aCwgaGVpZ2h0LCB0aGlzLm9wdGlvbnMuc3Rhcik7XHJcbiAgICAgICAgdGhpcy5zdGFycyA9IHN0YXJzO1xyXG4gICAgICAgIC8vIGNvbnN0IHN0YXJzID0gW107XHJcblxyXG4gICAgICAgIGNvbnN0IG15U3RhcnMgPSBbXTtcclxuICAgICAgICB0aGlzLm15U3RhcnMgID0gbXlTdGFycztcclxuXHJcbiAgICAgICAgbGV0IGNvdW50ID0gMFxyXG4gICAgICAgIFxyXG4gICAgICAgIC8v5q+P5LiA5bin5Yqo55S755Sf5oiQ5Ye95pWwXHJcbiAgICAgICAgbGV0IHBhdXNlID0gZmFsc2U7XHJcbiAgICAgICAgY29uc3QgZnJhbWUgPSAoKT0+IHtcclxuICAgICAgICAgICAgLy/mr4/pmpQxMOW4p+aYn+aYn+mXqueDgeS4gOasoe+8jOiKguecgeiuoeeul+i1hOa6kFxyXG4gICAgICAgICAgICBjb3VudCsrXHJcbiAgICAgICAgICAgIGNvdW50ICUgMjAgPT0gMCAmJiBzdGFycy5ibGluaygpXHJcbiAgICAgICAgICAgIC8vIGNvdW50ICUgMTAgPT0gMCAmJiBteVN0YXIuYmxpbmsoKVxyXG4gICAgICAgICAgICBtb29uLmRyYXcoKVxyXG4gICAgICAgICAgICBzdGFycy5kcmF3KClcclxuICAgICAgICAgICAgbXlTdGFycy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgaXRlbS5kcmF3KCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmcmFtZSlcclxuICAgICAgICB9XHJcbiAgICAgICAgZnJhbWUoKVxyXG4gICAgfVxyXG4gICAgdHJhbnNmb3JtUG9pbnQobnVtYmVyKSB7XHJcbiAgICAgICAgY29uc3QgcmVjdCA9IHRoaXMubW9vbi5nZXRGbGFnUmVjdCgpO1xyXG4gICAgICAgIGNvbnN0IGFyZWEgPSByZWN0LndpZHRoICogcmVjdC5oZWlnaHQgLyAxMDAwO1xyXG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gcmVjdDtcclxuICAgICAgICBjb25zdCBzY2FsZSA9IHdpZHRoIC8gaGVpZ2h0O1xyXG5cclxuICAgICAgICBjb25zdCBiSGVpZ2h0ID0gTWF0aC5zcXJ0KGFyZWEgLyBzY2FsZSApO1xyXG4gICAgICAgIGNvbnN0IGJXaWR0aCA9IGFyZWEgLyBiSGVpZ2h0O1xyXG5cclxuICAgICAgICAvLyDmgLvliJfmlbBcclxuICAgICAgICBjb25zdCBjb2xzID0gTWF0aC5mbG9vciAocmVjdC53aWR0aCAvIGJXaWR0aCk7XHJcbiAgICAgICAgY29uc3Qgcm93ID0gbnVtYmVyIC8gY29scztcclxuICAgICAgICBjb25zdCBjb2wgPSBudW1iZXIgJSBjb2xzO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGBudW1iZXI6ICR7bnVtYmVyfSwgYldpZHRoOiAke2JXaWR0aH0sIGJIZWlnaHQ6JHtiSGVpZ2h0fWApO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGByZWN0OiBgLCByZWN0KTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhgcmVjdDogJHtyZWN0fWAsIGBjb2w6JHtjb2x9YCwgYHJvdzoke3Jvd31gKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB4OiAoY29sICogYldpZHRoIC0gYldpZHRoIC8gMiApICsgcmVjdC54ICogMixcclxuICAgICAgICAgICAgeTogKHJvdyAqIGJIZWlnaHQgLSBiSGVpZ2h0IC8gMikgKyByZWN0LnksXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgbGlnaHQobnVtYmVyLCBmcm9tLCBzcGVlZCkge1xyXG4gICAgICAgIHRoaXMubGlnaHQyKHRoaXMudHJhbnNmb3JtUG9pbnQobnVtYmVyKSwgZnJvbSwgc3BlZWQpO1xyXG4gICAgfVxyXG4gICAgc2V0U3RhcnMobGlzdCkge1xyXG4gICAgICAgIGNvbnN0IHBvaW50cyA9IGxpc3QubWFwKG51bWJlciA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybVBvaW50KG51bWJlcilcclxuICAgICAgICB9KVxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGxpc3QsIHBvaW50cyk7XHJcbiAgICAgICAgdGhpcy5zdGFycy5zZXRTdGFycyhwb2ludHMpO1xyXG4gICAgfVxyXG4gICAgc2V0TXlTdGFycyhsaXN0KSB7XHJcbiAgICAgICAgY29uc3Qge2N0eCwgd2lkdGgsIGhlaWdodCB9ID0gdGhpcztcclxuICAgICAgICBjb25zdCBwb2ludHMgPSBsaXN0Lm1hcCgobnVtYmVyLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBwb2ludCA9IHRoaXMudHJhbnNmb3JtUG9pbnQobnVtYmVyKTtcclxuICAgICAgICAgICAgY29uc29sZS5kaXIocG9pbnQpXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgTXlTdGFyKGN0eCwgd2lkdGgsIGhlaWdodCwge1xyXG4gICAgICAgICAgICAgICAgeDogcG9pbnQueCxcclxuICAgICAgICAgICAgICAgIHk6IHBvaW50LnksXHJcbiAgICAgICAgICAgICAgICBmcmFtZTogKGluZGV4ICsgMykgJSA3LFxyXG4gICAgICAgICAgICAgICAgZnJvbToge1xyXG4gICAgICAgICAgICAgICAgICAgIHg6IHdpZHRoIC8gMixcclxuICAgICAgICAgICAgICAgICAgICB5OiAwLFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCB0aGlzLm9wdGlvbnMuc3Rhcik7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhsaXN0LCBwb2ludHMpO1xyXG4gICAgICAgIHRoaXMubXlTdGFycy5wdXNoKC4uLnBvaW50cyk7XHJcbiAgICB9XHJcbiAgICBsaWdodDIoZSwgZnJvbSwgc3BlZWQpIHtcclxuICAgICAgICBjb25zdCB7IGN0eCwgd2lkdGgsIGhlaWdodCB9ID0gdGhpcztcclxuICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICBjb25zdCBmcm9tUG9zaXRpb24gPSBmcm9tID8gZnJvbTogeyB4OiB3aWR0aC8yLCB5OiBoZWlnaHR9O1xyXG4gICAgICAgIGNvbnN0IHN0YXIgPSBuZXcgTXlTdGFyKGN0eCwgd2lkdGgsIGhlaWdodCwge1xyXG4gICAgICAgICAgICB4OiBlLngsXHJcbiAgICAgICAgICAgIHk6IGUueSxcclxuICAgICAgICAgICAgZnJhbWU6IDMsXHJcbiAgICAgICAgICAgIGZyb206IGZyb21Qb3NpdGlvblxyXG4gICAgICAgIH0sIHRoaXMub3B0aW9ucy5zdGFyLCBzcGVlZClcclxuICAgICAgICB0aGlzLm15U3RhcnMucHVzaChzdGFyKTtcclxuICAgIH1cclxufVxyXG5cclxud2luZG93LkZsYWdHYW1lID0gRmxhZ0dhbWU7Il19\n"]}